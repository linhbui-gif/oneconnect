/*! For license information please see settings.min.js.LICENSE.txt */
(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[662,1991,8155],{46385:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AdvancedNavigation:()=>ge,AsideFill:()=>j,Breadcrumbs:()=>fe,ChildPages:()=>R,ErrorRenderer:()=>De,Help:()=>xe,HelpFill:()=>Ae,Logo:()=>Pe,Main:()=>W,Navigation:()=>de,NavigationFill:()=>pe,ONBOARD_STORE_NAME:()=>Ft,Page:()=>C,PageHeader:()=>ve,PrimaryForm:()=>Ne,PrimaryFormSection:()=>Oe,PrimarySchemaForm:()=>Ie,PrimarySchemaFormActions:()=>Re,PrimarySchemaFormInputs:()=>Ce,SecureSiteEndFill:()=>sr,SelectableCard:()=>Se,Sidebar:()=>q,TOOLS_STORE_NAME:()=>mn,ToolFill:()=>Wn,Toolbar:()=>Q,ToolbarFill:()=>K,history:()=>Lr,useBreadcrumbTrail:()=>ye,useConfigContext:()=>ne,useCurrentPage:()=>k,useHelpBreadcrumbTrail:()=>_e,useModuleSchemaValidator:()=>ae,useNavigateTo:()=>re,useNavigation:()=>A});var r={};n.r(r),n.d(r,{CLEAR_SITE_TYPE:()=>ot,CLEAR_VISITED_LOCATIONS:()=>ht,EDIT_ANSWER:()=>ct,RECEIVE_SITE_TYPE:()=>lt,RECEIVE_SITE_TYPES:()=>it,RECORD_VISITED_LOCATION:()=>gt,REGISTER_COMPLETION_STEP:()=>pt,REGISTER_QUESTION_COMPONENT:()=>mt,SELECT_SITE_TYPE:()=>at,SET_COMPLETION_STEP:()=>Et,SET_ERROR:()=>dt,SET_IS_ANSWERING:()=>ut,answerQuestion:()=>ze,applyAnswerResponse:()=>Ke,clearSiteType:()=>je,clearVisitedLocations:()=>st,completeOnboarding:()=>Ye,editAnswer:()=>Ve,receiveSiteType:()=>Je,receiveSiteTypes:()=>Xe,recordVisitedLocation:()=>rt,registerCompletionStep:()=>nt,registerQuestionComponent:()=>tt,repeatQuestion:()=>Ge,resetOnboarding:()=>Qe,selectSiteType:()=>Ze});var s={};n.r(s),n.d(s,{getAnswerRequest:()=>wt,getAnswers:()=>bt,getCompletionStep:()=>Rt,getCompletionSteps:()=>Lt,getEditedAnswer:()=>St,getLastError:()=>Ot,getLastVisitedLocation:()=>Ct,getNextQuestion:()=>vt,getQuestionComponent:()=>Tt,getRestoreSiteTypeRequest:()=>It,getSelectedSiteType:()=>_t,getSelectedSiteTypeId:()=>yt,getSiteTypes:()=>ft,isAnswering:()=>Nt});var i={};n.r(i),n.d(i,{getNextQuestion:()=>At,getSelectedSiteType:()=>Mt,getSiteTypes:()=>kt});var l={};n.r(l),n.d(l,{FAILED_TOGGLE_TOOL:()=>jt,FINISH_TOGGLE_TOOL:()=>Vt,FINISH_TOOL:()=>Ht,RECEIVE_TOOLS:()=>qt,START_TOGGLE_TOOL:()=>Zt,START_TOOL:()=>Wt,fetchTools:()=>$t,runTool:()=>Bt,toggleTool:()=>Ut});var a={};n.r(a),n.d(a,{getLastError:()=>an,getLastResult:()=>sn,getResolvedTools:()=>Yt,getRunning:()=>nn,getTool:()=>tn,getTools:()=>Xt,getToolsConfig:()=>en,isRunning:()=>rn,isUpdating:()=>ln});var o={};n.r(o),n.d(o,{getResolvedTools:()=>un,getTool:()=>dn,getTools:()=>cn});var c=n(6293),u=n(95122),d=n(25993),m=n.n(d),p=n(90071),E=n(17563),g=n(92819),h=n(16550),f=n(42236),y=n(35800),_=n(55629),b=n(64893),v=n(3571),S=n(78380),N=n(47069),O=n(9576),T=n(48015),L=n(31600);const w=(0,c.createContext)({pages:[],childPages:{},addPage:()=>{},removePage:()=>{},addChildPages:()=>{},removeChildPages:()=>{}});function I(e){let{children:t}=e;const[n,r]=(0,c.useState)([]),[s,i]=(0,c.useState)({}),l=(0,c.useCallback)((e=>{r((t=>{const n=t.findIndex((t=>t.id===e.id));let r;return-1===n?r=[...t,e]:(r=[...t],r[n]=e),(0,g.sortBy)(r,"priority")}))}),[]),a=(0,c.useCallback)((e=>{r((t=>t.filter((t=>t.id!==e))))}),[]),o=(0,c.useCallback)(((e,t)=>{i((n=>({...n,[e]:t})))})),u=(0,c.useCallback)((e=>{i((t=>(0,g.omit)(t,e)))}));return(0,c.createElement)(w.Provider,{value:{pages:n,childPages:s,addPage:l,removePage:a,addChildPages:o,removeChildPages:u}},t)}function C(e){let{id:t,title:n,icon:r,roots:s=["settings"],priority:i=90,location:l="primary",featureFlag:a,ignore:o,children:u}=e;const d=(0,c.useContext)(w);return(0,c.useEffect)((()=>(d.addPage({id:t,title:n,icon:r,roots:s,priority:i,location:l,featureFlag:a,ignore:o,render:u}),()=>{d.removePage(t)})),[t,n]),null}function R(e){const{pages:t}=e,n=(0,c.useContext)(w),r=(0,O.useInstanceId)(R,"");return(0,N.ZP)((()=>(n.addChildPages(r,t),()=>{n.removeChildPages(r)})),[t]),null}function x(){let{root:e,location:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{featureFlags:n}=(0,T.useSelect)((e=>({featureFlags:e(L.CORE_STORE_NAME).getFeatureFlags()})),[]),{root:r}=(0,h.UO)(),{pages:s}=(0,c.useContext)(w);return s.filter((s=>s.roots.includes(e||r)&&(!t||s.location===t)&&(!s.featureFlag||n.includes(s.featureFlag))))}function k(){const e=x(),{page:t}=(0,h.UO)();return e.find((e=>e.id===t))}function M(){const{childPages:e}=(0,c.useContext)(w);return(0,c.useMemo)((()=>(0,g.flatMap)(e)))}function A(e){const{root:t,page:n,child:r,tab:s}=(0,h.UO)(),i=function(e){const t=x();if(!t.length)return;if(!e)return t[0];const n=t.findIndex((t=>t.id===e));return t[n+1]?.id}(n),l=M().map((e=>e.id)),a=(0,h.k6)();let o,c;if(e){let i,l;for(let t=0;t<e.length;t++)if(e[t]===s){i=e[t-1],l=e[t+1];break}o=i&&`/${t}/${n}/${r}/${i}`,c=l&&`/${t}/${n}/${r}/${l}`}if((!o||!c)&&l){let e,s;for(let t=0;t<l.length;t++)if(l[t]===r){e=l[t-1],s=l[t+1];break}o=o||e&&`/${t}/${n}/${e}`,c=c||s&&`/${t}/${n}/${s}`}return!c&&i&&(c=`/${t}/${i}`),{previous:o,goPrevious(){o&&a.push((0,p.ob)(o))},next:c,goNext(){c&&a.push((0,p.ob)(c))},nextPage:i&&`/${t}/${i}`,goNextPage(){i&&a.push((0,p.ob)(`/${t}/${i}`))}}}w.displayName="PageRegistration";var F=n(73727),D=n(19144),P=n(87462),$=n(94184),B=n.n($),U=n(91991);function q(e){let{className:t,logo:n="color",children:r}=e;const{root:s}=(0,h.UO)(),[i,l]=(0,c.useState)(!1);return(0,c.createElement)("div",(0,P.Z)({},(0,U.Zk)((()=>i&&l(!1))),{tabIndex:-1,className:B()("itsec-settings-sidebar",t,`itsec-settings-sidebar--root-${s}`,{"itsec-settings-sidebar--expanded":i})}),(0,c.createElement)("div",{className:"itsec-settings-sidebar__inner"},(0,c.createElement)(F.rU,{to:"/",className:"itsec-settings-sidebar__logo"},(0,c.createElement)(Pe,{style:n})),(0,c.createElement)(b.Button,{icon:"menu-alt2",label:(0,u.__)("Toggle Sidebar","it-l10n-ithemes-security-pro"),className:"itsec-settings-sidebar__toggle",showTooltip:!1,isPressed:i,onClick:e=>{e.currentTarget.focus(),l(!i)},"aria-expanded":i}),r))}function W(e){let{children:t}=e;const n=k(),r=(0,c.useRef)(),s=(0,h.TH)(),{hash:i}=s;(0,c.useEffect)((()=>{r.current?.focus(),r.current?.ownerDocument.body.scrollTo(0,0)}),[s]);const[l,a]=(0,c.useState)(!1);return(0,c.createElement)("div",{className:"itsec-settings-main",ref:r,tabIndex:-1},(0,c.createElement)(Q,null),(0,c.createElement)("div",{className:B()("itsec-settings-main__wrapper",{"itsec-settings-main__wrapper--has-aside":l})},(0,c.createElement)("main",{"aria-labelledby":"itsec-page-header",className:B()("itsec-settings-main__content",{[`itsec-page--${n?.id}`]:!!n})},(0,c.createElement)(y.ErrorBoundary,{FallbackComponent:De},(0,c.createElement)(xe,null),"#help"===i?(0,c.createElement)("div",{hidden:!0},t):t)),(0,c.createElement)(Z,null,(e=>(0,c.createElement)(H,{fills:e,setHasAside:a})))))}function H(e){let{fills:t,setHasAside:n}=e;return(0,c.useEffect)((()=>n(t.length>0)),[t]),t.length?(0,c.createElement)("aside",{className:"itsec-aside"},t):null}const{Slot:Z,Fill:j}=(0,b.createSlotFill)("Aside");var V=n(50460),z=n(31511);const{Slot:G,Fill:K}=(0,b.createSlotFill)("Toolbar");function Q(){const{root:e}=(0,h.UO)(),t=(0,z.bv)("dashboard"),n=(0,O.useMediaQuery)("(max-width: 600px)"),[r,s]=(0,c.useState)(!1),i=(0,O.useFocusOnMount)();return(0,c.createElement)("div",{role:"region","aria-label":(0,u.__)("Toolbar","it-l10n-ithemes-security-pro"),className:"itsec-settings-toolbar"},"onboard"!==e&&!n&&(0,c.createElement)(V.o,null),(0,c.createElement)(b.Toolbar,{label:(0,u.__)("Toolbar Actions","it-l10n-ithemes-security-pro")},"onboard"!==e&&(0,c.createElement)(React.Fragment,null,n&&(0,c.createElement)(React.Fragment,null,(0,c.createElement)(b.ToolbarButton,{icon:"search",text:(0,u.__)("Search","it-l10n-ithemes-security-pro"),"aria-expanded":r,onClick:()=>s(!r)}),r&&(0,c.createElement)(b.Popover,{className:"itsec-settings-search__popover",expandOnMobile:!0,headerTitle:(0,u.__)("Search","it-l10n-ithemes-security-pro"),focusOnMount:"container",onClose:()=>s(!1),onFocusOutside:()=>{}},(0,c.createElement)(V.o,{showResults:!0,ref:i,onPick:()=>s(!1)}))),(0,c.createElement)(b.ToolbarButton,{icon:"shield-alt",href:t,text:(0,u.__)("Dashboard","it-l10n-ithemes-security-pro")})),(0,c.createElement)(G,null)))}var Y=n(65096),X=n.n(Y),J=n(66e3),ee=n(54761);const te=(0,c.createContext)({serverType:"",installType:"",onboardComplete:!1});function ne(){return(0,c.useContext)(te)}function re(){const e=(0,h.k6)();return(0,c.useCallback)((function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";return e[n]((0,p.ob)(t))}),[e])}function se(){return se.instance||(se.instance=new(X())({schemaId:"id"}),se.instance.addMetaSchema(n(27171)),se.instance.addFormat("html",{type:"string",validate:()=>!0})),se.instance}function ie(e,t){const n=n=>((e,t,n)=>{const{serverType:r,installType:s,activeModules:i,settings:l,featureFlags:a}=n;if(e["server-type"]&&!e["server-type"].includes(r))return!1;if(e["install-type"]&&e["install-type"]!==s)return!1;if(e["active-modules"])for(const t of e["active-modules"])if(!i.includes(t))return!1;if(e["feature-flags"])for(const t of e["feature-flags"])if(!a?.includes(t))return!1;return!(e.settings&&!se().compile(e.settings)(l))&&(0,ee.applyFilters)("ithemes-security.settings.isConditionalSettingActive",!0,t,e,n)})(n,e,t),r=(t,s)=>s.properties?{...s,properties:Object.entries(s.properties).reduce(((s,i)=>{let[l,a]=i;const o=`${t}.${l}`;return e.settings.conditional[o]&&!n(e.settings.conditional[o])||(s[l]=r(o,a)),s}),{})}:s,s=Object.entries(e.settings.schema.properties).reduce(((t,s)=>{let[i,l]=s;return e.settings.interactive.includes(i)?(e.settings.conditional[i]&&!n(e.settings.conditional[i])||(t[i]=r(i,l)),t):t}),{});return{...e.settings.schema,properties:s}}function le(e,t){const{serverType:n,installType:r}=ne(),s=(0,T.useRegistry)(),{activeModules:i,featureFlags:l}=(0,T.useSelect)((e=>({activeModules:e(L.MODULES_STORE_NAME).getActiveModules(),featureFlags:e(L.CORE_STORE_NAME).getFeatureFlags()})),[]);return e?ie(e,{serverType:n,installType:r,activeModules:i,settings:t,registry:s,featureFlags:l}):null}function ae(e){const t=se(),{module:n,settings:r}=(0,T.useSelect)((t=>({module:t(L.MODULES_STORE_NAME).getModule(e),settings:t(L.MODULES_STORE_NAME).getEditedSettings(e)})),[e]),s=le(n,r),i=(0,c.useCallback)((()=>!0)),l=(0,c.useMemo)((()=>s?t.compile(s):i),[s]);return(0,c.useCallback)((()=>!!l(r)||{errors:l.errors,errorText:oe(l.errors,e,s)}),[l,r])}function oe(e,t,n){const r=[];for(const{message:s,schemaPath:i,dataPath:l}of e){let e=J.IB.create(i),a=e.parent(n);for(;a&&!a.title;)e=J.IB.create(e.path.slice(0,e.path.length-1)),a=e.parent(n);a?.title?r.push(`${a.title} ${s}.`):r.push(`${t}${l} ${s}.`)}return r}function ce(){return[{slug:"login",label:(0,u.__)("Login Security","it-l10n-ithemes-security-pro")},{slug:"lockout",label:(0,u.__)("Lockouts","it-l10n-ithemes-security-pro")},{slug:"site-check",label:(0,u.__)("Site Check","it-l10n-ithemes-security-pro")},{slug:"utility",label:(0,u.__)("Utilities","it-l10n-ithemes-security-pro")},{slug:"advanced",label:(0,u.__)("Advanced","it-l10n-ithemes-security-pro")}]}function ue(){const{featureFlags:e,siteInfo:t,requirementsInfo:n}=(0,T.useSelect)((e=>({featureFlags:e(L.CORE_STORE_NAME).getFeatureFlags(),siteInfo:e(L.CORE_STORE_NAME).getSiteInfo(),requirementsInfo:e(L.CORE_STORE_NAME).getRequirementsInfo()})),[]);return(0,c.useCallback)(((r,s)=>{const i=new z.PN;if(!r.requirements)return i;const l=e=>e.validate===s||"activate"===s;if(r.requirements.ssl&&l(r.requirements.ssl)&&"https:"!==document.location.protocol&&i.add("ssl",(0,u.__)("Your site must support SSL.","it-l10n-ithemes-security-pro"),r.requirements.ssl),r.requirements["feature-flags"]&&l(r.requirements["feature-flags"]))for(const t of r.requirements["feature-flags"].flags)e.includes(t)||i.add("feature-flags",(0,u.sprintf)((0,u.__)("The '%s' feature flag must be enabled.","it-l10n-ithemes-security-pro"),t),r.requirements["feature-flags"]);if(r.requirements.multisite&&l(r.requirements.multisite)&&("enabled"===r.requirements.multisite.status&&!1===t?.multisite?i.add("multisite",(0,u.__)("Multisite must be enabled.","it-l10n-ithemes-security-pro"),r.requirements.multisite):"disabled"===r.requirements.multisite.status&&!0===t?.multisite&&i.add("multisite",(0,u.__)("Multisite is not supported.","it-l10n-ithemes-security-pro"),r.requirements.multisite)),r.requirements.server&&l(r.requirements.server)&&n){!r.requirements.server.php||(a=n.server.php,o=r.requirements.server.php,a.localeCompare(o,void 0,{numeric:!0,sensitivity:"base"})>=0)||i.add("server",(0,u.sprintf)((0,u.__)("You must be running PHP version %s or later.","it-l10n-ithemes-security-pro"),r.requirements.server.php),r.requirements.server);const e=(r.requirements.server.extensions||[]).filter((e=>!n.server.extensions[e]));1===e.length?i.add("server",(0,u.sprintf)((0,u.__)("The %s PHP extension is required.","it-l10n-ithemes-security-pro"),e[0]),r.requirements.server):e.length>0&&i.add("server",(0,u.sprintf)((0,u._n)("The following PHP extension is required: %l.","The following PHP extensions are required: %l.",e.length,"it-l10n-ithemes-security-pro").replace("%l","%s"),e.join(", ")),r.requirements.server)}var a,o;return i}),[e,t,n])}function de(e){let{guided:t=!1,allowBack:n=!1,allowForward:r=!1,children:s}=e;const i=x({location:"primary"}),{root:l,page:a}=(0,h.UO)(),o=function(){const{url:e}=(0,h.$B)(),{pathname:t}=(0,h.TH)(),{pathname:n}=(0,p.ob)(e);return t.replace(n,"")}(),u=i.findIndex((e=>e.id===a));return(0,c.createElement)("nav",null,(0,c.createElement)("ul",{className:B()("itsec-nav",{"itsec-nav--guided":t})},i.map(((e,i)=>{let d=!t;(n&&i<=u||r&&i>=u)&&(d=!0);let m=a===e.id;m&&e.ignore&&e.ignore.find((e=>o.startsWith(e)))&&(m=!1);const p=t?"yes-alt":e.icon||"admin-generic";return(0,c.createElement)("li",{key:e.id,className:B()("itsec-nav__item",{"itsec-nav__item--active":m,"itsec-nav__item--completed":t&&i<u})},(0,c.createElement)("span",{className:"itsec-nav__item-title"},d?(0,c.createElement)(F.rU,{to:`/${l}/${e.id}`},(0,c.createElement)(b.Dashicon,{icon:p}),(0,c.createElement)("span",{className:"itsec-nav__item-title-text"},e.title)):(0,c.createElement)(React.Fragment,null,(0,c.createElement)(b.Dashicon,{icon:p}),(0,c.createElement)("span",{className:"itsec-nav__item-title-text"},e.title))),m?(0,c.createElement)(React.Fragment,null,s,(0,c.createElement)(me,{item:e})):null)}))))}function me(e){let{item:t}=e;const n=M();return(0,c.createElement)(Ee,{fillProps:{item:t}},(e=>0===c.Children.count(e)&&0===n.length?null:(0,c.createElement)("ul",{className:"itsec-nav__children"},n.map((e=>{let{to:t,title:n,...r}=e;return(0,c.createElement)("li",{key:t},(0,c.createElement)(F.OL,(0,P.Z)({to:t},r),n))})),c.Children.map(e,((e,t)=>(0,c.createElement)("li",{key:t},e))))))}const{Fill:pe,Slot:Ee}=(0,b.createSlotFill)("Navigation");function ge(){const e=x({location:"advanced"}),{root:t}=(0,h.UO)();return(0,c.createElement)("ul",{className:"itsec-settings-advanced-nav"},(0,c.createElement)("li",null,(0,c.createElement)(F.OL,{to:`/${t}/configure/advanced`},(0,c.createElement)(b.Dashicon,{icon:"privacy"}),(0,c.createElement)("span",{className:"itsec-settings-advanced-nav__item-title"},(0,u.__)("Advanced","it-l10n-ithemes-security-pro")))),e.map((e=>(0,c.createElement)("li",{key:e.id},(0,c.createElement)(F.OL,{to:`/${t}/${e.id}`},(0,c.createElement)(b.Dashicon,{icon:e.icon}),(0,c.createElement)("span",{className:"itsec-settings-advanced-nav__item-title"},e.title))))))}var he=n(81019);function fe(e){let{title:t,trail:n,match:r}=e;const s=ye(t,r);return n=n||s,n.length<=1?null:(0,c.createElement)("nav",{className:"itsec-breadcrumbs","aria-label":(0,u.__)("Breadcrumbs","it-l10n-ithemes-security-pro")},(0,c.createElement)("ul",{className:"itsec-breadcrumbs"},n.map(((e,t)=>{const r=t===n.length-1?"page":null;return e.to?(0,c.createElement)("li",{key:t},(0,c.createElement)(F.rU,{to:e.to,"aria-current":r},e.title)):e.childPages?(0,c.createElement)("li",{key:t},(0,c.createElement)(be,{selected:e.selected,childPages:e.childPages,"aria-current":r})):null})).filter(g.identity)))}function ye(e,t){const n=(0,h.$B)(),r=(0,h.TH)(),{url:s,params:{root:i,page:l,child:a}}=t||n,o=x({root:i});let u=M();k()?.id!==l&&(u=[]);const d=o.find((e=>e.id===l)),m=u.find((e=>e.id===a));return(0,c.useMemo)((()=>{const t=[];return t.push({title:d.title,to:`/${i}/${d.id}`}),m&&u.length&&t.push({title:m.title,selected:m,childPages:u}),e&&e!==m?.title&&e!==d.title&&t.push({title:e,to:r.pathname.startsWith(s)?(0,p.Ep)(r):s}),t}),[e,i,d,m,r])}function _e(e){const{url:t}=(0,h.$B)(),n=ye((0,u.__)("Help","it-l10n-ithemes-security-pro"));return(0,c.useMemo)((()=>{const r=[...n];return e&&r.splice(r.length-1,0,{to:t,title:e}),r}),[n,e])}function be(e){let{childPages:t,selected:n,"aria-current":r}=e;const s=(0,O.useFocusOnMount)();return(0,c.createElement)(b.Dropdown,{className:"itsec-breadcrumbs__menu",popoverProps:{position:"bottom center",className:"itsec-breadcrumbs__menu-popover",focusOnMount:"container"},renderToggle:e=>{let{isOpen:t,onToggle:r}=e;return(0,c.createElement)(b.Button,{"aria-haspopup":!0,"aria-expanded":t,onClick:r,onKeyDown:e=>{t||e.keyCode!==he.DOWN||(e.preventDefault(),e.stopPropagation(),r())},text:n.title,icon:t?"arrow-up":"arrow-down",iconPosition:"right"})},renderContent:()=>(0,c.createElement)(b.NavigableMenu,{role:"menu"},t.map((e=>{let{id:t,to:i,title:l}=e;return(0,c.createElement)(F.rU,{key:i,to:i,ref:n.id===t?s:null,"aria-current":n.id===t?r:null},l)})))})}function ve(e){let{title:t,subtitle:n,description:r,help:s,align:i="left",breadcrumbs:l=!0,children:a}=e;const o=(0,h.TH)();return(0,c.createElement)("header",{className:B()("itsec-page-header",`itsec-page-header--align-${i}`,{"itsec-page-header--has-actions":!!a,"itsec-page-header--has-help":!!s})},!0===l&&(0,c.createElement)(fe,{title:t}),l,(0,c.createElement)("div",{className:"itsec-page-header__text"},(0,c.createElement)("h1",{id:"itsec-page-header"},t,s&&(0,c.createElement)(D.J$,{help:s,to:{...o,hash:"#help"}})),n&&(0,c.createElement)("h2",null,n),r&&(0,c.createElement)(D.Lu,{content:r,tagName:"p"})),a&&(0,c.createElement)("div",{className:"itsec-page-header__actions"},a))}function Se(e){let{to:t,onClick:n,title:r,description:s,icon:i,fillIcon:l,recommended:a,direction:o="horizontal",className:u}=e;const d=B()("itsec-selectable-card",`itsec-selectable-card--${o}`,u,{"itsec-selectable-card--fill-icon":l,"itsec-selectable-card--recommended":a}),m=(0,c.createElement)(b.Card,null,(0,c.createElement)(b.CardBody,null,(0,c.createElement)("div",{className:"itsec-selectable-card__content"},(0,c.createElement)(b.Icon,{icon:i}),(0,c.createElement)("div",{className:"itsec-selectable-card__text"},(0,c.createElement)("h4",{className:"itsec-selectable-card__title"},r),(0,c.createElement)("p",{className:"itsec-selectable-card__description"},s)))));return t?(0,c.createElement)(F.rU,{to:t,className:d},m):n?(0,c.createElement)("button",{"aria-label":r,type:"button",onClick:n,className:d},m):m}function Ne(e){let{onSubmit:t=(()=>{}),saveLabel:n=(0,u.__)("Save","it-l10n-ithemes-security-pro"),isSaving:r,saveDisabled:s=!1,onCancel:i,cancelHref:l,cancelLabel:a=(0,u.__)("Cancel","it-l10n-ithemes-security-pro"),id:o,children:d,buttons:m,errors:p,apiError:E}=e;const g=(0,O.useInstanceId)(Ne,"itsec-primary-form");return o=o||g,(0,c.createElement)(React.Fragment,null,(0,c.createElement)(b.Card,{className:"itsec-primary-form"},(0,c.createElement)(b.CardBody,null,(0,c.createElement)(D.KM,{errors:p,apiError:E}),(0,c.createElement)("form",{id:o,onSubmit:e=>{e.preventDefault(),t()}},d))),(0,c.createElement)(b.Flex,null,(i||l)&&(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(b.Button,{isTertiary:!0,onClick:i,href:l},a)),(0,c.createElement)(D.Xp,null),m&&m.map(((e,t)=>(0,c.createElement)(b.FlexItem,{key:t},e))),(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(b.Button,{isPrimary:!0,isBusy:r,disabled:s,form:o,type:"submit"},n))))}function Oe(e){let{heading:t,className:n,children:r}=e;return c.Children.toArray(r).some(c.isValidElement)?(0,c.createElement)("div",{className:B()("itsec-primary-form__section",n)},t&&(0,c.createElement)("h3",{className:"itsec-primary-form__section-title"},t),r):null}var Te=n(54639),Le=n(33590);const we=(0,Te.Zz)(Le.ZP);function Ie(e){let{saveLabel:t,isSaving:n,saveDisabled:r,cancelLabel:s,onCancel:i,cancelRoute:l,undoLabel:a,undoDisabled:o,onUndo:u,children:d,errors:m,apiError:p,schemaError:E,...g}=e,h=(0,O.useInstanceId)(Ie,"itsec-schema-form");return h=g.id||h,(0,c.createElement)(React.Fragment,null,(0,c.createElement)(b.Card,null,(0,c.createElement)(b.CardBody,null,(0,c.createElement)(D.KM,{errors:m,apiError:p,schemaError:E}),(0,c.createElement)(Ce,(0,P.Z)({},g,{id:h})))),(0,c.createElement)(Re,{id:h,saveLabel:t,cancelLabel:s,isSaving:n,saveDisabled:r,onCancel:i,cancelRoute:l,undoLabel:a,undoDisabled:o,onUndo:u},d))}function Ce(e){let{className:t,...r}=e;return(0,c.createElement)(we,(0,P.Z)({},r,{className:B()("itsec-primary-schema-form","rjsf",t),additionalMetaSchemas:[n(27171)]}),(0,c.createElement)(React.Fragment,null))}function Re(e){let{id:t,saveLabel:n=(0,u.__)("Save","it-l10n-ithemes-security-pro"),isSaving:r,saveDisabled:s,cancelLabel:i=(0,u.__)("Cancel","it-l10n-ithemes-security-pro"),onCancel:l,cancelRoute:a,undoLabel:o=(0,u.__)("Undo Changes","it-l10n-ithemes-security-pro"),undoDisabled:d,onUndo:m,children:p}=e;return(0,c.createElement)(b.Flex,null,l&&(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(b.Button,{isTertiary:!0,type:"button",onClick:l},i)),a&&(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(F.rU,{component:(0,U.Sj)(b.Button),isTertiary:!0,type:"button",to:a},i)),(0,c.createElement)(D.Xp,null),p,m&&(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(b.Button,{isSecondary:!0,disabled:d,onClick:m},o)),(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(b.Button,{isPrimary:!0,isBusy:r,disabled:r||s,form:t,type:"submit"},n)))}function xe(){const[e,t]=(0,c.useState)(!1),n=(0,h.TH)(),r="#help"===n.hash,s={...n,hash:r?"":"#help"};return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(K,null,(0,c.createElement)(F.rU,{component:(0,U.Sj)(b.ToolbarButton),icon:"editor-help",to:s,disabled:!e,className:"itsec-help-toggle-link",text:r?(0,u.__)("Exit Help","it-l10n-ithemes-security-pro"):(0,u.__)("Help","it-l10n-ithemes-security-pro")})),(0,c.createElement)(Me,null,(e=>(0,c.createElement)(ke,{fills:e,isVisible:r,setHasHelp:t}))))}function ke(e){let{fills:t,isVisible:n,setHasHelp:r}=e;return(0,c.useEffect)((()=>r(t.length>0)),[t]),n?t:null}const{Slot:Me,Fill:Ae}=(0,b.createSlotFill)("Help");var Fe=n(51783);function De(e){let{error:t}=e;const{pathname:n}=(0,h.TH)();return(0,c.createElement)(b.Card,{className:"itsec-error-renderer"},(0,c.createElement)(b.CardBody,null,(0,c.createElement)(Fe.gI,null)),(0,c.createElement)(b.CardFooter,{isShady:!0},(0,u.__)("An unexpected error occurred.","it-l10n-ithemes-security-pro"),(0,c.createElement)(D.Xp,null),(0,c.createElement)(b.Button,{isSecondary:!0,onClick:()=>window.location.reload()},(0,u.__)("Refresh","it-l10n-ithemes-security-pro")),(0,c.createElement)(b.ClipboardButton,{isPrimary:!0,text:`Page: ${n}\nError: ${t.stack}`},(0,u.__)("Copy Error","it-l10n-ithemes-security-pro"))))}function Pe(e){let{style:t,className:n}=e;const{installType:r}=ne();let s;return s="pro"===r?"white"===t?Fe.v5:Fe.Zj:"white"===t?Fe.CE:Fe.D5,(0,c.createElement)(s,{className:n})}var $e=n(87514),Be=n.n($e);function Ue(e){return{type:"API_FETCH",request:e}}function qe(e,t){return{type:"AWAIT_PROMISE",promise:e,delay:t}}function We(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{type:"DO_ACTION",action:e,args:n}}const He={AWAIT_PROMISE:e=>{let{promise:t,delay:n}=e;return n?Promise.all([t,(r=n,new Promise((e=>setTimeout(e,r))))]):t;var r},DO_ACTION:(0,T.createRegistryControl)((e=>t=>{let{action:n,args:r}=t;(0,ee.doAction)(`ithemes-security.${n}`,e,...r)})),API_FETCH(e){let{request:t}=e;return Be()(t).catch(z.xJ)},CREATE_NOTICE:(0,T.createRegistryControl)((e=>t=>{let{status:n,content:r,options:s}=t;s.autoDismiss&&(s.id=s.id||(0,g.uniqueId)("itsec-auto-dismiss-"),setTimeout((()=>e.dispatch("core/notices").removeNotice(s.id,s.context)),s.autoDismiss)),e.dispatch("core/notices").createNotice(n,r,s)}))};function*Ze(e){const t=yield T.controls.resolveSelect(Ft,"getSiteTypes"),n=(0,g.find)(t,(t=>t.id===e));if(!n)throw(0,u.__)("No site type found with that id.","it-l10n-ithemes-security-pro");yield Je(n),yield Qe()}function je(){return{type:ot}}function Ve(e){return{type:ct,answer:e}}function*ze(e){const t=yield T.controls.select(Ft,"getAnswerRequest",e);let n;yield et();try{n=yield Ue({method:"PUT",path:`/ithemes-security/v1/site-types/${t.id}`,data:t}),yield Je(n)}catch(e){yield(r=e,{type:dt,error:r})}var r;yield et(!1)}function*Ge(){const e=yield T.controls.select(Ft,"getRestoreSiteTypeRequest");e.answers.pop(),yield et();const t=yield Ue({method:"PUT",path:`/ithemes-security/v1/site-types/${e.id}`,data:e});yield Je(t),yield et(!1)}function*Ke(){const e=yield T.controls.select(Ft,"getAnswers"),t=yield T.controls.resolveSelect(L.MODULES_STORE_NAME,"getModules");for(const n of e){for(const e of n.modules)t.find((t=>{let{id:n}=t;return n===e}))?.side_effects?yield T.controls.dispatch(L.MODULES_STORE_NAME,"activateModule",e):yield T.controls.dispatch(L.MODULES_STORE_NAME,"editModule",e,{status:{selected:"active"}});for(const e in n.settings)n.settings.hasOwnProperty(e)&&(yield T.controls.dispatch(L.MODULES_STORE_NAME,"editSettings",e,n.settings[e]));yield We("onboard.applyAnswerResponse",n)}}function*Qe(){yield Ve(null),yield T.controls.dispatch(L.MODULES_STORE_NAME,"resetModuleEdits"),yield T.controls.dispatch(L.MODULES_STORE_NAME,"resetSettingEdits"),yield We("onboard.reset")}function*Ye(e){let{root:t}=e;const n=e=>{if(e instanceof Error)throw e},r=(0,g.sortBy)(yield T.controls.select(Ft,"getCompletionSteps"),"priority");try{for(const e of r){if(e.activeCallback&&!e.activeCallback({root:t}))continue;yield{type:Et,step:e};const r=e.callback();r instanceof Promise&&n(yield qe(r,(0,g.random)(1500,2500)))}yield T.controls.dispatch(L.MODULES_STORE_NAME,"editSetting","global","onboard_complete",!0),yield T.controls.dispatch(L.MODULES_STORE_NAME,"saveSettings","global"),yield{type:Et,step:!0}}catch(e){yield{type:Et,step:!1},yield function(){return{type:"CREATE_NOTICE",status:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"info",content:arguments.length>1?arguments[1]:void 0,options:{context:"ithemes-security",...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}}}}("error",(0,u.sprintf)((0,u.__)("Could not complete setup: %s","it-l10n-ithemes-security-pro"),e.message))}}function Xe(e){return{type:it,siteTypes:e}}function Je(e){return{type:lt,siteType:e}}function et(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return{type:ut,isAnswering:e}}function tt(e,t){return{type:mt,id:e,component:t}}function nt(e){let{id:t,label:n,priority:r,render:s,callback:i,activeCallback:l}=e;return{type:pt,id:t,label:n,priority:r,render:s,callback:i,activeCallback:l}}function rt(e){return{type:gt,location:(0,g.trimEnd)(e,"/")}}function st(){return{type:ht}}const it="RECEIVE_SITE_TYPES",lt="RECEIVE_SITE_TYPE",at="SELECT_SITE_TYPE",ot="CLEAR_SITE_TYPE",ct="EDIT_ANSWER",ut="SET_IS_ANSWERING",dt="SET_ERROR",mt="REGISTER_QUESTION_COMPONENT",pt="REGISTER_COMPLETION_STEP",Et="SET_COMPLETION_STEP",gt="RECORD_VISITED_LOCATION",ht="CLEAR_VISITED_LOCATIONS";function ft(e){return e.siteTypes}function yt(e){return e.selectedSiteType}function _t(e){return(0,g.find)(ft(e),{id:yt(e)})}function bt(e){return e.answers}function vt(e){return e.nextQuestion}function St(e){return e.editedAnswer}function Nt(e){return e.isAnswering}function Ot(e){return e.lastError}function Tt(e,t){return e.questionComponents[t]}function Lt(e){return e.completionSteps}function wt(e,t){return{id:e.selectedSiteType,answers:[...e.answers,{question:e.nextQuestion.id,answer:t}]}}function It(e){return{id:e.selectedSiteType,answers:[...e.answers]}}function Ct(e){const t=["/onboard","/onboard/site-type"];for(let n=e.visitedLocations.length-1;n>=0;n--){const r=e.visitedLocations[n];if(!t.includes(r))return r}}function Rt(e){return e.completionStep}const xt={siteTypes:[],selectedSiteType:"",answers:[],nextQuestion:void 0,editedAnswer:void 0,lastError:void 0,isAnswering:!1,questionComponents:{},completionStep:!1,completionSteps:{},visitedLocations:[]},kt={*fulfill(){const e=yield Ue({path:"/ithemes-security/v1/site-types"});yield Xe(e)},isFulfilled:e=>e.siteTypes.length>0},Mt={*fulfill(){yield T.controls.resolveSelect(Ft,"getSiteTypes")},isFulfilled:e=>e.siteTypes.length>0},At={*fulfill(){const e=yield T.controls.select(Ft,"getRestoreSiteTypeRequest"),t=yield Ue({method:"PUT",path:`/ithemes-security/v1/site-types/${e.id}`,data:e});yield Je(t)},isFulfilled:e=>void 0!==e.nextQuestion},Ft="ithemes-security/onboard";function Dt(){const{clearVisitedLocations:e}=(0,T.useDispatch)(Ft),{siteTypes:t,lastVisitedLocation:n}=(0,T.useSelect)((e=>({siteTypes:e(Ft).getSiteTypes(),lastVisitedLocation:e(Ft).getLastVisitedLocation()})));return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(ve,{title:(0,u.__)("Choose the Type of Website","it-l10n-ithemes-security-pro"),subtitle:(0,u.__)("Select one of the following that best represents your website.","it-l10n-ithemes-security-pro")}),n&&(0,c.createElement)(D.rN,{hasBorder:!0,onDismiss:e,messages:[(0,c.createInterpolateElement)((0,u.__)("Already started setting up iThemes Security? <a>Resume</a> from where you left off.","it-l10n-ithemes-security-pro"),{a:(0,c.createElement)(F.rU,{to:n})})]}),(0,c.createElement)("ul",{className:"itsec-site-type-list"},t.map((e=>(0,c.createElement)("li",{key:e.id},(0,c.createElement)(Pt,{id:e.id,title:e.title,description:e.description,icon:e.icon,recommended:e.recommended}))))),(0,c.createElement)(Ae,null,(0,c.createElement)(ve,{title:(0,u.__)("Site Type","it-l10n-ithemes-security-pro")}),(0,c.createElement)(D.ss,{topic:"site-type"})))}function Pt(e){let{id:t,title:n,description:r,icon:s,recommended:i}=e;const{clearSiteType:l}=(0,T.useDispatch)(Ft),a=(0,h.$B)(),o=re();return(0,c.createElement)(Se,{onClick:()=>{l(),o(`${a.url}/${t}`)},title:n,description:r,icon:s,recommended:i})}function*$t(){const e=yield Ue({path:"/ithemes-security/v1/tools"});yield{type:qt,tools:e}}function*Bt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yield{type:Wt,tool:e,form:n};try{t=yield Ue({path:`/ithemes-security/v1/tools/${e}`,method:"POST",data:n,parse:!1})}catch(t){const n=yield qe(z.x4.fromResponse(t.getResponse()));return yield{type:Ht,tool:e,result:n},n}const r=yield qe(z.x4.fromResponse(t));return yield{type:Ht,tool:e,result:r},r}function*Ut(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];yield{type:Zt,tool:e,enabled:n};try{t=yield Ue({path:`/ithemes-security/v1/tools/${e}`,method:"PUT",data:{enabled:n}})}catch(t){return yield{type:jt,tool:e,error:t},t}return yield{type:Vt,tool:e,data:t},t}(0,T.registerStore)(Ft,{controls:He,actions:r,selectors:s,resolvers:i,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:return{...e,siteTypes:t.siteTypes};case lt:return{...e,selectedSiteType:t.siteType.id,nextQuestion:t.siteType.next_question,answers:t.siteType.answers,editedAnswer:t.siteType.next_question?.answer_schema?.default,lastError:void 0};case at:return{...e,selectedSiteType:t.id,answers:[],nextQuestion:void 0,lastError:void 0};case ot:return{...e,selectedSiteType:"",answers:[],nextQuestion:void 0,lastError:void 0};case ct:return{...e,editedAnswer:t.answer};case ut:return{...e,isAnswering:t.isAnswering};case dt:return{...e,lastError:t.error};case Et:return{...e,completionStep:t.step};case mt:return{...e,questionComponents:{...e.questionComponents,[t.id]:t.component}};case pt:return{...e,completionSteps:{...e.completionSteps,[t.id]:(0,g.omit)(t,["type"])}};case gt:return{...e,visitedLocations:(0,g.last)(e.visitedLocations)===t.location?e.visitedLocations:(0,g.without)(e.visitedLocations,t.location).concat(t.location)};case ht:return{...e,visitedLocations:[]};default:return e}},persist:["selectedSiteType","answers","visitedLocations"]});const qt="RECEIVE_TOOLS",Wt="START_TOOL",Ht="FINISH_TOOL",Zt="START_TOGGLE_TOOL",jt="FAILED_TOGGLE_TOOL",Vt="FINISH_TOGGLE_TOOL";var zt=n(28306),Gt=n(59588),Kt=n.n(Gt);const Qt=Kt()(((e,t)=>e.map((e=>t[e.slug]||e))),{maxSize:1}),Yt=(0,T.createRegistrySelector)((e=>t=>Qt(e(mn).getToolsConfig(),t.bySlug))),Xt=(0,zt.Z)((e=>e.slugs.map((t=>e.bySlug[t]))),(e=>[e.bySlug,e.slugs])),Jt=Kt()((e=>e.reduce(((e,t)=>{for(const[n,r]of Object.entries(t.tools))e.push({slug:n,module:t.id,toggleable:!1,schedule:"",form:null,...r});return e}),[])),{maxSize:1}),en=(0,T.createRegistrySelector)((e=>()=>Jt(e(L.MODULES_STORE_NAME).getModules()))),tn=(0,T.createRegistrySelector)((e=>(t,n)=>t.bySlug[n]||e(mn).getToolsConfig().find((e=>n===e.slug))));function nn(e){return e.running}function rn(e,t){return e.running.includes(t)}function sn(e,t){return e.lastResult[t]}function ln(e,t){return e.updating.includes(t)}function an(e,t){return e.lastError[t]}const on={bySlug:{},slugs:[],running:[],lastResult:{},updating:[],lastError:{}};function*cn(){yield $t()}function*un(){yield T.controls.resolveSelect(mn,"getTools")}const dn={*fulfill(){yield T.controls.resolveSelect(mn,"getTools")},isFulfilled:(e,t)=>!!e.bySlug[t]},mn="ithemes-security/tools",pn=((0,T.registerStore)(mn,{controls:He,actions:l,selectors:a,resolvers:o,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qt:return{...e,bySlug:(0,g.keyBy)(t.tools,"slug"),slugs:(0,g.map)(t.tools,"slug")};case Wt:return{...e,running:[...e.running,t.tool]};case Ht:return{...e,running:(0,g.without)(e.running,t.tool),lastResult:{...e.lastResult,[t.tool]:t.result}};case Zt:return{...e,updating:[...e.updating,t.tool]};case jt:return{...e,updating:(0,g.without)(e.updating,t.tool),lastError:{...e.lastError,[t.tool]:t.error}};case Vt:return{...e,updating:(0,g.without)(e.updating,t.tool),lastError:(0,g.omit)(e.lastError,t.tool),bySlug:{...e.bySlug,[t.tool]:t.data}};default:return e}}}),{disableInlineErrors:!0});function En(e){let{prompt:t,description:n,showErrors:r=!0,children:s}=e;const{error:i,siteTypeTitle:l}=(0,T.useSelect)((e=>({error:e(Ft).getLastError(),siteTypeTitle:e(Ft).getSelectedSiteType()?.title})));return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(ve,{title:t,subtitle:n,breadcrumbs:(0,c.createElement)(fe,{title:l})}),r&&(0,c.createElement)(D.KM,{apiError:i,className:"itsec-site-type-question__error-list"}),s)}function gn(e){let{question:t,onAnswer:n,goBack:r}=e;const{editAnswer:s}=(0,T.useDispatch)(Ft),{answer:i,error:l}=(0,T.useSelect)((e=>({error:e(Ft).getLastError(),answer:e(Ft).getEditedAnswer()}))),[a,o]=(0,c.useState)([]);return(0,c.createElement)(En,{prompt:t.prompt,description:t.description,showErrors:!1},(0,c.createElement)(Ie,{schema:t.answer_schema,uiSchema:t.answer_schema.uiSchema,formData:i,onChange:e=>{let{formData:t}=e;return s(t)},onSubmit:(e,t)=>{let{formData:r}=e;t.preventDefault(),o([]),n(r)},saveLabel:(0,u.__)("Next","it-l10n-ithemes-security-pro"),cancelLabel:(0,u.__)("Back","it-l10n-ithemes-security-pro"),onCancel:r,formContext:pn,apiError:l,schemaError:a,onError:o,showErrorList:!1}))}function hn(e){let{question:t,onAnswer:n}=e;return(0,c.createElement)(En,{prompt:t.prompt,description:t.description},(0,c.createElement)("div",{className:"itsec-site-type-questions-list"},(0,c.createElement)(Se,{onClick:()=>n(!1),title:(0,u.__)("Self","it-l10n-ithemes-security-pro"),description:(0,u.__)("This is my own personal site.","it-l10n-ithemes-security-pro"),direction:"vertical",icon:"admin-users",className:"itsec-site-type-question"}),(0,c.createElement)(Se,{onClick:()=>n(!0),title:(0,u.__)("Client","it-l10n-ithemes-security-pro"),description:(0,u.__)("I'm making this for a client.","it-l10n-ithemes-security-pro"),direction:"vertical",icon:"businessperson",className:"itsec-site-type-question"})))}function fn(){const{registerQuestionComponent:e}=(0,T.useDispatch)(Ft);(0,U.eH)(fn,(()=>{e("is-client",hn)}))}function yn(){fn();const{goNext:e}=A(),{siteType:t}=(0,h.UO)(),{isAnswering:n,selectedSiteTypeId:r,questionId:s}=(0,T.useSelect)((e=>({isAnswering:e(Ft).isAnswering(),selectedSiteTypeId:e(Ft).getSelectedSiteTypeId(),questionId:e(Ft).getNextQuestion()?.id}))),{selectSiteType:i,applyAnswerResponse:l}=(0,T.useDispatch)(Ft),a=function(){const{answerQuestion:e,repeatQuestion:t}=(0,T.useDispatch)(Ft),n=(0,T.useSelect)((e=>e(Ft).getNextQuestion())),r=n?.id,s=(0,T.useSelect)((e=>e(Ft).getQuestionComponent(r)),[r]);if(!n)return n;const i=(0,c.memo)(s||gn);return(0,c.createElement)(i,{question:n,onAnswer:e,goBack:t})}();return(0,c.useLayoutEffect)((()=>{r!==t&&i(t)}),[r,t]),(0,c.useEffect)((()=>{null===a&&(l(),e())}),[a]),n?(0,c.createElement)(b.Disabled,null,a):a?(0,c.createElement)(React.Fragment,null,a,(0,c.createElement)(Ae,null,(0,c.createElement)(ve,{title:(0,u.__)("Site Type","it-l10n-ithemes-security-pro"),breadcrumbs:!1}),(0,c.createElement)(D.ss,{topic:`site-type-${s}`,fallback:"site-type"}))):null}function _n(){const{path:e}=(0,h.$B)();return(0,c.createElement)(h.rs,null,(0,c.createElement)(h.AW,{path:`${e}/:siteType`},(0,c.createElement)(yn,null)),(0,c.createElement)(h.AW,{path:`${e}`},(0,c.createElement)(Dt,null)))}function bn(){const{url:e,path:t}=(0,h.$B)(),{root:n}=(0,h.UO)(),r=ue(),{installType:s}=ne(),{modules:i,dirty:l}=(0,T.useSelect)((e=>({modules:e(L.MODULES_STORE_NAME).getEditedModules(),dirty:e(L.MODULES_STORE_NAME).getDirtyModules()})),[]),a=ce().map((e=>{let{slug:t,label:s}=e;return{name:t,title:s,modules:(0,g.sortBy)(i.filter((e=>e.type===t&&"always-active"!==e.status.default&&("settings"===n||e.onboard||"import"===n&&l.includes(t))&&function(e,t){if("active"===t.status.selected)return!0;const n=e(t,"activate");return!n.hasErrors()||n.getErrorCodes().some((e=>n.getErrorData(e)[0].showMessageIfUnmet))}(r,e))),"order")}})).filter((e=>e.modules.length>0&&("settings"===n||"advanced"!==e.name))),o=(0,g.sortBy)(a.reduce(((e,t)=>e.concat(t.modules)),[]),(e=>{let{title:t}=e;return t.toLowerCase()}));if(o.length>0){const e={name:"all",title:(0,u.__)("All","it-l10n-ithemes-security-pro"),modules:o};"free"===s?a.unshift(e):a.push(e)}const d=(0,u.__)("Features is the home base of iThemes Security. Enabling a security feature will unlock the related User Group, Configure, and Notification settings. Disabling a security feature will hide the related options throughout the plugin.","it-l10n-ithemes-security-pro");return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(R,{pages:a.map((t=>({title:t.title,to:`${e}/${t.name}`,id:t.name,replace:!0})))}),a.length>0&&(0,c.createElement)(h.rs,null,(0,c.createElement)(h.AW,{path:`${t}/:child`},(0,c.createElement)(ve,{title:(0,u.__)("Features","it-l10n-ithemes-security-pro"),subtitle:(0,u.__)("Choose the security features you‘d like to enable.","it-l10n-ithemes-security-pro"),help:d}),(0,c.createElement)(vn,{base:e,tabs:a}),"settings"!==n&&(0,c.createElement)(Sn,null),(0,c.createElement)(In,{help:d})),(0,c.createElement)(h.l_,{to:`${e}/${a[0].name}`})))}function vn(e){let{base:t,tabs:n}=e;const{child:r}=(0,h.UO)(),s=re();return(0,c.createElement)(b.Card,null,(0,c.createElement)(D.y2,{isStyled:!0,tabs:n,selected:r,onSelect:e=>{s(`${t}/${e}`,"replace")}},(e=>(0,c.createElement)(Nn,{modules:e.modules}))))}function Sn(){const{next:e}=A();return(0,c.createElement)(b.Flex,null,(0,c.createElement)(D.Xp,null),(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(F.rU,{component:(0,U.Sj)(b.Button),isPrimary:!0,to:e},(0,u.__)("Next","it-l10n-ithemes-security-pro"))))}function Nn(e){let{modules:t}=e;return(0,c.createElement)(b.CardBody,null,(0,c.createElement)(On,{modules:t}))}function On(e){let{modules:t}=e;const{root:n}=(0,h.UO)(),r="settings"===n?wn:Ln;return(0,c.createElement)("div",{className:"itsec-modules"},t.map((e=>(0,c.createElement)(Tn,{key:e.id,module:e,statusToggle:e.side_effects?wn:r}))),1===t.length&&(0,c.createElement)("div",{"aria-hidden":"true"}))}function Tn(e){let{module:t,statusToggle:n}=e;const{hash:r}=(0,h.TH)(),{root:s}=(0,h.UO)(),i=(0,T.useSelect)((e=>e(L.MODULES_STORE_NAME).getError(t.id))),l=ue()(t,"run");return(0,c.createElement)(b.Card,{key:t.id,className:B()("itsec-module",{"itsec-highlighted-search-result":r===`#${t.id}`})},(0,c.createElement)(b.CardBody,{className:"itsec-module__body"},(0,c.createElement)("h3",null,t.title),"settings"===s&&"active"===t.status.selected&&!l.hasErrors()&&(0,c.createElement)(React.Fragment,null,t.settings?.interactive.length>0&&(0,c.createElement)(b.Tooltip,{text:(0,u.__)("Edit Settings","it-l10n-ithemes-security-pro")},(0,c.createElement)(F.rU,{className:"itsec-module__settings",to:`/settings/configure/${t.type}/${t.id}`},(0,c.createElement)(b.VisuallyHidden,null,(0,u.__)("Edit Settings","it-l10n-ithemes-security-pro")))),!(0,g.isEmpty)(t.user_groups)&&(0,c.createElement)(F.rU,{className:"itsec-module__user-groups",to:`/settings/user-groups?module=${t.id}`},(0,u.sprintf)((0,u.__)("User Groups (%d)","it-l10n-ithemes-security-pro"),(0,g.size)(t.user_groups)))),(0,c.createElement)(D.Lu,{content:t.description,tagName:"p",id:`itsec-module-description--${t.id}`}),("active"===t.status.selected||!l.hasErrors())&&(0,c.createElement)(n,{module:t}),(0,c.createElement)(D.KM,{apiError:i,errors:l.getAllErrorMessages()})))}function Ln(e){let{module:t}=e;const{editModule:n}=(0,T.useDispatch)(L.MODULES_STORE_NAME);return(0,c.createElement)(b.FormToggle,{checked:"active"===t.status.selected,onChange:e=>n(t.id,{status:{selected:e.target.checked?"active":"inactive"}}),"aria-label":(0,u.sprintf)((0,u.__)("Enable the “%s” module.","it-l10n-ithemes-security-pro"),t.title),"aria-describedby":`itsec-module-description--${t.id}`})}function wn(e){let{module:t}=e;const n="active"===t.status.selected,[r,s]=(0,c.useState)(!1),{activateModule:i,deactivateModule:l}=(0,T.useDispatch)(L.MODULES_STORE_NAME);return(0,c.createElement)(b.FormToggle,{checked:n,onChange:e=>(async e=>{s(!0),e?await i(t.id):await l(t.id),s(!1)})(e.target.checked),disabled:r,"aria-label":(0,u.sprintf)((0,u.__)("Enable the “%s” module.","it-l10n-ithemes-security-pro"),t.title),"aria-describedby":`itsec-module-description--${t.id}`})}function In(e){let{help:t}=e;return(0,c.createElement)(Ae,null,(0,c.createElement)(ve,{title:(0,u.__)("Features","it-l10n-ithemes-security-pro"),description:t,breadcrumbs:(0,c.createElement)(fe,{trail:_e()})}),(0,c.createElement)(D.ss,{topic:"modules"}))}function Cn(){const{url:e,path:t,isExact:n,params:{root:r}}=(0,h.$B)(),{types:s,modules:i}=function(){const{root:e}=(0,h.UO)(),{serverType:t,installType:n}=ne(),r=(0,T.useRegistry)(),{editedModules:s,activeModules:i,featureFlags:l}=(0,T.useSelect)((e=>({editedModules:e(L.MODULES_STORE_NAME).getEditedModules(),activeModules:e(L.MODULES_STORE_NAME).getActiveModules(),featureFlags:e(L.CORE_STORE_NAME).getFeatureFlags()}))),a=ue(),o=(0,g.sortBy)(s.filter((s=>{if("active"!==s.status.selected)return!1;if(!s.settings?.show_ui)return!1;if(!s.settings?.interactive.length)return!1;if("onboard"===e&&!s.settings?.onboard.length)return!1;if("import"===e&&!s.settings?.onboard.length&&!s.settings?.import.length)return!1;if(a(s,"run").hasErrors())return!1;if(s.settings?.conditional){const a=ie(s,{serverType:t,installType:n,activeModules:i,featureFlags:l,registry:r,settings:r.select(L.MODULES_STORE_NAME).getEditedSettings(s.id)});if((0,g.isEmpty)(a.properties))return!1;if((0,g.every)(a.properties,(e=>"object"===e.type&&(0,g.isEmpty)(e.properties))))return!1;if("onboard"===e&&!s.settings.onboard.some((e=>!!a.properties[e])))return!1;if("import"===e&&!s.settings.onboard.some((e=>!!a.properties[e]))&&!s.settings.import.some((e=>!!a.properties[e])))return!1}return!0})),"order");return{types:ce().map((e=>({...e,modules:o.filter((t=>t.type===e.slug))}))).filter((e=>e.modules.length>0)),modules:o}}(),l=i.filter((e=>"recommended"===e.type)),a=l.map((e=>e.id)).join("|"),o=[...l.map((e=>({slug:e.id,label:e.title}))),...s];return(0,c.createElement)(React.Fragment,null,!n&&(0,c.createElement)(R,{pages:o.filter((e=>{let{slug:t}=e;return"advanced"!==t})).map((t=>{let{slug:n,label:r}=t;return{title:r,to:`${e}/${n}`,id:n}}))}),(0,c.createElement)(h.rs,null,(0,c.createElement)(h.AW,{path:`${t}/:child(${a})`,render:e=>{let{match:t}=e;const n=i.find((e=>e.id===t.params.child));return n?(0,c.createElement)(kn,{module:n}):null}}),(0,c.createElement)(h.AW,{path:[`${t}/:child/:tab`,`${t}/:child`],render:e=>{let{match:t}=e;const n=s.find((e=>e.slug===t.params.child));return n?(0,c.createElement)(xn,{modules:n.modules}):null}}),(0,c.createElement)(h.AW,{path:t},o.length>0&&("settings"!==r?(0,c.createElement)(Rn,{to:`${e}/${o[0].slug}`}):(0,c.createElement)(h.l_,{to:`${e}/${o[0].slug}`})))))}function Rn(e){let{to:t}=e;return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(ve,{title:(0,u.__)("Configure","it-l10n-ithemes-security-pro"),subtitle:(0,u.__)("Based on the Security Features you’ve enabled while settings up iThemes Security, we’ve selected the most important settings for you to configure.","it-l10n-ithemes-security-pro")}),(0,c.createElement)("div",{className:"itsec-configure-intro"},(0,c.createElement)(Se,{title:(0,u.__)("Recommended","it-l10n-ithemes-security-pro"),description:(0,u.__)("Configure Site","it-l10n-ithemes-security-pro"),icon:"star-filled",fillIcon:!0,to:t,direction:"vertical"})))}function xn(e){let{modules:t}=e;const{url:n,path:r}=(0,h.$B)(),{child:s,tab:i,root:l,...a}=(0,h.UO)(),o=re(),u=(0,c.useMemo)((()=>t.map((e=>({name:e.id,title:e.title,module:e})))),[s,t]),d=t.find((e=>e.id===i));if(!d){const e=t.find((e=>e.type===s));return(0,c.createElement)(h.l_,{to:e?`${n}/${e.id}`:n})}return(0,c.createElement)(kn,{module:d,tabs:u,onSelect:e=>o((0,h.Gn)(r,{...a,root:l,child:s,tab:e}))})}function kn(e){let{module:t,tabs:n,onSelect:r}=e;const{root:s}=(0,h.UO)(),i="settings"===s?An:Mn;return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(ve,{title:t.title,subtitle:t.description,help:t.help,breadcrumbs:"advanced"!==t.type}),(0,c.createElement)(i,{tabs:n,module:t,onSelect:r}))}function Mn(e){let{tabs:t,module:n,onSelect:r}=e;const{root:s}=(0,h.UO)(),{previous:i,goNext:l}=A(t?.map((e=>e.name)));return n?(0,c.createElement)(Fn,{tabs:t,module:n,onSelect:r,onSave:l,saveLabel:(0,u.__)("Next","it-l10n-ithemes-security-pro"),saveDisabled:!1,cancelLabel:(0,u.__)("Back","it-l10n-ithemes-security-pro"),cancelRoute:i,filterFields:(e,t)=>n.settings.onboard.includes(t)||"import"===s&&n.settings.import.includes(t)}):null}function An(e){let{tabs:t,module:n,onSelect:r}=e;const{saveSettings:s}=(0,T.useDispatch)(L.MODULES_STORE_NAME);return n?(0,c.createElement)(Fn,{tabs:t,module:n,onSelect:r,onSave:()=>s(n.id)}):null}function Fn(e){let{tabs:t,module:n,onSelect:r,onSave:s,saveDisabled:i,filterFields:l,...a}=e;const o=(0,O.useInstanceId)(Fn,`itsec-configure-${n.id}`),{hash:u}=(0,h.TH)(),{isSaving:d,isDirty:m,apiError:p}=(0,T.useSelect)((e=>({isSaving:e(L.MODULES_STORE_NAME).isSavingSettings(n.id),isDirty:e(L.MODULES_STORE_NAME).areSettingsDirty(n.id),apiError:e(L.MODULES_STORE_NAME).getError(n.id)})),[n.id]),{resetSettingEdits:E}=(0,T.useDispatch)(L.MODULES_STORE_NAME),{schema:f,uiSchema:y,formData:_,setFormData:v}=function(e,t){const n=(0,T.useSelect)((t=>t(L.MODULES_STORE_NAME).getEditedSettings(e.id)),[e.id]),{editSettings:r}=(0,T.useDispatch)(L.MODULES_STORE_NAME),s=le(e,n);return t&&(s.properties=(0,g.pickBy)(s.properties,t)),{schema:s,uiSchema:e.settings.schema.uiSchema,formData:n,setFormData:t=>{r(e.id,t.formData)}}}(n,l),S=(0,c.useMemo)((()=>{return u?(e=y?(0,g.cloneDeep)(y):{},t=[u.substr(1),"classNames"],"itsec-highlighted-search-result",(0,g.set)(e,t,B()((0,g.get)(e,t),"itsec-highlighted-search-result")),e):y;var e,t}),[y,u]),[N,w]=(0,c.useState)([]),I=(0,c.useMemo)((()=>({module:n.id,disableInlineErrors:!0})),[n.id]),C=e=>{w([]),s(e)};if(!n)return null;const R=()=>(0,c.createElement)(React.Fragment,null,(0,c.createElement)(Pn,{module:n}),(0,c.createElement)(b.CardBody,null,(0,c.createElement)(D.KM,{apiError:p,schemaError:N}),(0,c.createElement)(Ce,{id:o,onSubmit:C,schema:f,uiSchema:S,formData:_,onChange:v,idPrefix:`itsec_${n.id}`,formContext:I,onError:w,showErrorList:!1})));return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(Dn,{module:n}),(0,c.createElement)(b.Card,null,t?(0,c.createElement)(D.y2,{tabs:t,selected:n.id,onSelect:r,isStyled:!0},R):R()),(0,c.createElement)(Re,(0,P.Z)({id:o,isSaving:d,saveDisabled:void 0===i?!m:i,undoDisabled:!m,onUndo:()=>E(n.id)},a)))}function Dn(e){let{module:t}=e;return(0,c.createElement)(Ae,null,(0,c.createElement)(ve,{title:t.title,description:t.help,breadcrumbs:(0,c.createElement)(fe,{trail:_e(t.title)})}),(0,c.createElement)(D.ss,{topic:t.id}))}function Pn(e){let{module:t}=e;const n=[];if(!(0,g.isEmpty)(t.user_groups)||"password-requirements"===t.id){const e="password-requirements"===t.id?(0,u.__)("User Groups","it-l10n-ithemes-security-pro"):(0,u.sprintf)((0,u.__)("User Groups (%d)","it-l10n-ithemes-security-pro"),(0,g.size)(t.user_groups));n.push((0,c.createElement)(F.rU,{to:`/settings/user-groups?module=${t.id}`,component:(0,U.Sj)(b.Button),isLink:!0,text:e,icon:"groups"}))}return n.length?(0,c.createElement)(b.CardHeader,{className:"itsec-configure-module-links"},(0,c.createElement)("ul",null,n.map(((e,t)=>(0,c.createElement)("li",{key:t},e))))):null}function $n(){const{hash:e}=(0,h.TH)(),{tools:t,running:n,activeModules:r,isLoaded:s}=(0,T.useSelect)((e=>({tools:e(mn).getResolvedTools(),running:e(mn).getRunning(),activeModules:e(L.MODULES_STORE_NAME).getActiveModules(),isLoaded:e(mn).hasFinishedResolution("getTools")}))),i=(0,c.useMemo)((()=>t.filter((e=>r.includes(e.module)&&!1!==e.available)).map((e=>({name:e.slug,title:e.title,description:e.description,showSpinner:(0,c.createElement)(D.$j,{size:30,paused:!n.includes(e.slug)}),render:Bn})))),[t,n,r]),[l,a]=(0,c.useState)("");return(0,c.useEffect)((()=>{e&&a(e.slice(1))}),[e]),(0,c.createElement)(React.Fragment,null,(0,c.createElement)(Ae,null,(0,c.createElement)(ve,{title:(0,u.__)("Tools","it-l10n-ithemes-security-pro")}),(0,c.createElement)(D.ss,{topic:"tools"})),(0,c.createElement)(ve,{title:(0,u.__)("Tools","it-l10n-ithemes-security-pro")}),t.length>0&&s&&(0,c.createElement)(b.Card,null,(0,c.createElement)(D.UQ,{className:"itsec-tools-list",isStyled:!0,panels:i,allowNone:!0,expanded:l,setExpanded:a})))}function Bn(e){let{name:t,className:n,...r}=e;const{tool:s,result:i,isRunning:l}=(0,T.useSelect)((e=>({tool:e(mn).getTool(t),result:e(mn).getLastResult(t),isRunning:e(mn).isRunning(t)}))),[a,o]=(0,c.useState)([]);return(0,c.useEffect)((()=>o([])),[t]),(0,c.createElement)("div",(0,P.Z)({className:B()(n,"itsec-tool")},r),(0,c.createElement)(Un,{result:i,schemaError:a}),s.help&&(0,c.createElement)(D.Lu,{content:s.help,tagName:"p"}),(0,c.createElement)(Hn,{tool:s.slug}),s.toggleable?(0,c.createElement)(React.Fragment,null):(0,c.createElement)(qn,{tool:s,setSchemaError:o,isRunning:l}))}function Un(e){let{result:t,schemaError:n}=e;return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(D.KM,{schemaError:n,apiError:t?.error}),(0,c.createElement)(D.rN,{messages:t?.success,type:"success"}),(0,c.createElement)(D.rN,{messages:t?.warning,type:"warning"}),(0,c.createElement)(D.rN,{messages:t?.info,type:"info"}))}function qn(e){let{tool:t,setSchemaError:n,isRunning:r}=e;const s=function(e){const{activeModules:t,settings:n}=(0,T.useSelect)((t=>({settings:(0,g.mapValues)(e.condition?.settings||{},((e,n)=>t(L.MODULES_STORE_NAME).getSettings(n))),activeModules:t(L.MODULES_STORE_NAME).getActiveModules()})),[e]);if(!e.condition)return!0;if(e.condition["active-modules"])for(const n of e.condition["active-modules"])if(!t.includes(n))return!1;if(e.condition.settings){const t=se();for(const[r,s]of Object.entries(e.condition.settings))if(!t.compile(s)(n[r]))return!1}return!0}(t),i=(0,O.useInstanceId)(qn,"itsec-tool-form"),l=(0,c.useMemo)((()=>({disableInlineErrors:!0,tool:t.slug}))),{runTool:a}=(0,T.useDispatch)(mn);return(0,c.createElement)(React.Fragment,null,t.form&&s&&(0,c.createElement)(Ce,{id:i,idPrefix:`itsec_tool_${t.slug}`,schema:t.form,uiSchema:t.form.uiSchema,formContext:l,showErrorList:!1,onError:n,onSubmit:e=>{let{formData:r}=e;n([]),a(t.slug,r)}}),(0,c.createElement)(b.Flex,{className:"itsec-tool__actions",justify:"flex-start"},(0,c.createElement)(b.FlexItem,null,(0,c.createElement)(b.Button,{isPrimary:!0,className:"itsec-tool__trigger",type:t.form?"submit":"button",form:t.form?i:void 0,onClick:t.form?void 0:()=>a(t.slug),isBusy:r,disabled:!s},(0,u.__)("Run","it-l10n-ithemes-security-pro"))),(0,c.createElement)(Hn,{tool:t.slug,fillProps:{isActive:s},area:"actions"},(e=>c.Children.map(e,((e,t)=>(0,c.createElement)(b.FlexItem,{key:t},e)))))),!s&&t.condition?.description&&(0,c.createElement)(D.rN,{type:"warning",messages:[t.condition.description]}))}function Wn(e){let{tool:t,area:n="main",...r}=e;return(0,c.createElement)(b.Fill,(0,P.Z)({name:`Tool${n}${t}`},r))}function Hn(e){let{tool:t,area:n="main",...r}=e;return(0,c.createElement)(b.Slot,(0,P.Z)({name:`Tool${n}${t}`},r))}var Zn=n(51980);const jn=(0,Zn.Z)("div",{target:"e16dzays2"})('display:grid;grid-template-areas:"heading heading" "text text" "dashboard settings";grid-template-columns:1fr 1fr;gap:1rem 0.625rem;@media (min-width: ',(e=>{let{theme:t}=e;return t.breaks.medium}),'px ){grid-template-areas:"heading heading heading" "text dashboard settings";grid-template-columns:4fr 1fr 1fr;gap:1rem 0.625rem;}'),Vn=(0,Zn.Z)(S.X6,{target:"e16dzays1"})({name:"1c7kmgu",styles:"grid-area:heading"}),zn=(0,Zn.Z)(S.X6,{target:"e16dzays0"})({name:"1a4sv2g",styles:"grid-area:text"});function Gn(){const e=(0,z.bv)("dashboard"),t=(0,z.bv)("settings");return(0,c.createElement)(jn,null,(0,c.createElement)(Vn,{level:1,text:(0,u.__)("Great Work! Your site is ready and is more secure than ever!","it-l10n-ithemes-security-pro"),size:S.yH.HUGE}),(0,c.createElement)(zn,{level:3,text:(0,u.__)("If you want to dig into your site’s security, check out your security dashboard, and make changes via settings.","it-l10n-ithemes-security-pro"),size:S.yH.LARGE,variant:S.rK.DARK}),(0,c.createElement)(S.zx,{variant:"secondary",href:e,text:(0,u.__)("Dashboard","it-l10n-ithemes-security-pro")}),(0,c.createElement)(S.zx,{variant:"secondary",href:t,text:(0,u.__)("Settings","it-l10n-ithemes-security-pro")}))}const Kn=(0,Zn.Z)(b.CardBody,{target:"e1a4ibp22"})({name:"4zk4ri",styles:"display:flex;flex-direction:column;gap:1rem"}),Qn=(0,Zn.Z)(Fe.dK,{shouldForwardProp:e=>"installType"!==e,target:"e1a4ibp21"})("g{fill:",(e=>{let{installType:t}=e;return"free"===t&&"#F8D739"}),";}"),Yn=(0,Zn.Z)(S.zx,{target:"e1a4ibp20"})("width:100%;background:#EDEDED!important;&:not(:hover):not(:focus){box-shadow:none!important;}@media (min-width: ",(e=>{let{theme:t}=e;return t.breaks.huge}),"px ){justify-content:left;}"),Xn=[{href:"https://ithem.es/plugin-vuln-report",text:(0,u.__)("Weekly WordPress Vulnerability Report","it-l10n-ithemes-security-pro")},{href:"https://ithem.es/plugin-get-started",text:(0,u.__)("Tutorials Library","it-l10n-ithemes-security-pro")},{href:"https://ithem.es/plugin-security-blog",text:(0,u.__)("Security Blogs","it-l10n-ithemes-security-pro")},{href:"https://ithem.es/plugin-free-webinars",text:(0,u.__)("Upcoming Webinars","it-l10n-ithemes-security-pro")},{href:"https://ithem.es/plugin-ebooks",text:(0,u.__)("Security Ebooks","it-l10n-ithemes-security-pro")}];function Jn(){const{installType:e}=ne();return(0,c.createElement)(S.Tg,{variant:"primary",as:b.Card},(0,c.createElement)(Kn,null,(0,c.createElement)(S.X6,{level:3,text:(0,u.__)("More Security Resources","it-l10n-ithemes-security-pro"),size:S.yH.NORMAL,variant:S.rK.DARK,weight:S.fs.HEAVY,align:"center",icon:(0,c.createElement)(Qn,{installType:e}),iconSize:24}),(0,c.createElement)(S.aV,{gap:3},Xn.map((e=>{let{href:t,text:n}=e;return(0,c.createElement)(S.HC,{key:t},(0,c.createElement)(Yn,{variant:"secondary",href:t,text:n}))})))))}const er=(0,Zn.Z)(S.aV,{target:"e17hdbgk0"})("display:grid;grid-template-columns:1fr;gap:0 1rem;@media (min-width: ",(e=>{let{theme:t}=e;return t.breaks.medium}),"px ){grid-template-columns:",(e=>{let{children:t}=e;return c.Children.count(t)>3&&"repeat(2, 1fr)"}),";}"),tr=[{text:(0,u.__)("User security strengthened","it-l10n-ithemes-security-pro"),activeModules:["two-factor","passwordless-login","fingerprinting"]},{text:(0,u.__)("Brute force attacks blocked","it-l10n-ithemes-security-pro"),activeModules:["brute-force","network-brute-force","recaptcha"]},{text:(0,u.__)("Scanning for vulnerable themes, plugins, and known malware","it-l10n-ithemes-security-pro"),activeModules:["malware-scheduling"]},{text:(0,u.__)("Monitoring for suspicious file changes","it-l10n-ithemes-security-pro"),activeModules:["file-change"]},{text:(0,u.__)("Banning bad bots and user agents","it-l10n-ithemes-security-pro"),activeModules:["ban-users"]}];function nr(){const{allActiveModules:e}=(0,T.useSelect)((e=>({allActiveModules:e(L.MODULES_STORE_NAME).getActiveModules()})),[]),t=tr.filter((t=>{let{activeModules:n}=t;return n.find((t=>e.includes(t)))}));return t.length?(0,c.createElement)(React.Fragment,null,(0,c.createElement)(S.xv,{text:(0,u.__)("Here are some notable improvements…","it-l10n-ithemes-security-pro")}),(0,c.createElement)(er,{icon:Fe.Y_,iconSize:20,gap:4},t.map(((e,t)=>{let{text:n}=e;return(0,c.createElement)(S.HC,{key:t,text:n})})))):null}const{Slot:rr,Fill:sr}=(0,b.createSlotFill)("secureSiteEnd");function ir(){dr();const[e,t]=(0,c.useState)(!1);return e?(0,c.createElement)(cr,null):(0,c.createElement)(lr,{goToEnd:()=>t(!0)})}function lr(e){let{goToEnd:t}=e;const{root:n}=(0,h.UO)(),{completeOnboarding:r}=(0,T.useDispatch)(Ft),{steps:s,currentStep:i}=(0,T.useSelect)((e=>({steps:e(Ft).getCompletionSteps(),currentStep:e(Ft).getCompletionStep()})),[]);let l;return l=!0===i?(0,u.__)("Your site has been secured.","it-l10n-ithemes-security-pro"):!1===i?(0,u.__)("Click finish to secure your site.","it-l10n-ithemes-security-pro"):(0,u.__)("Your site is being secured.","it-l10n-ithemes-security-pro"),(0,c.createElement)(React.Fragment,null,(0,c.createElement)(ve,{title:(0,u.__)("Secure Site","it-l10n-ithemes-security-pro"),subtitle:l,breadcrumbs:!1}),(0,c.createElement)("h2",{className:"itsec-secure-site-overview"},(0,u.__)("Overview","it-l10n-ithemes-security-pro")),(0,c.createElement)(ur,{steps:s,currentStep:i}),(0,c.createElement)(b.Flex,{justify:"right"},(0,c.createElement)(b.FlexItem,null,!0===i?(0,c.createElement)(S.zx,{isPrimary:!0,onClick:t},(0,u.__)("Finish","it-l10n-ithemes-security-pro")):(0,c.createElement)(S.zx,{isPrimary:!0,onClick:()=>r({root:n}),disabled:!1!==i},(0,u.__)("Secure Site","it-l10n-ithemes-security-pro")))))}const ar=(0,Zn.Z)("div",{target:"e1291x9a1"})("display:grid;gap:1rem 2rem;grid-template-columns:1fr;@media (min-width: ",(e=>{let{theme:t}=e;return t.breaks.huge}),"px ){grid-template-columns:4fr 1fr;}"),or=(0,Zn.Z)("div",{target:"e1291x9a0"})({name:"4zk4ri",styles:"display:flex;flex-direction:column;gap:1rem"});function cr(){return(0,c.createElement)(React.Fragment,null,(0,c.createElement)("div",{className:"itsec-secure-site-page-container"},(0,c.createElement)(ar,null,(0,c.createElement)(or,null,(0,c.createElement)(Gn,null),(0,c.createElement)(nr,null)),(0,c.createElement)(Jn,null))),(0,c.createElement)(rr,null))}function ur(e){let{steps:t,currentStep:n}=e;const{root:r}=(0,h.UO)(),[s,i]=(0,c.useState)(!1),l=(0,c.useMemo)((()=>(0,g.sortBy)((0,g.filter)(t,(e=>{let{activeCallback:t}=e;return!t||t({root:r})})),"priority").map((e=>{let{render:t,...r}=e;const s=r.id===n?.id,i=r.priority<(n?.priority||0),l=r.priority>(n?.priority||0);return{name:r.id,title:r.label,text:r.label,icon:"yes-alt",render:t&&(e=>(0,c.createElement)("div",e,(0,c.createElement)(t,null))),showSpinner:!(!0===n||!s&&!l)&&(0,c.createElement)(D.$j,{size:30,color:"--itsec-primary-theme-color",paused:l}),className:i&&"itsec-secure-site-step--complete"}}))),[t,n]);return(0,c.createElement)(b.Card,null,(0,c.createElement)(D.UQ,{isStyled:!0,className:"itsec-secure-site-steps",allowNone:!0,panels:l,expanded:s,setExpanded:i}))}function dr(){const{registerCompletionStep:e}=(0,T.useDispatch)(Ft),{saveModules:t,saveSettings:n}=(0,T.useDispatch)(L.MODULES_STORE_NAME);(0,U.eH)(dr,(()=>{e({id:"savingModules",label:(0,u.__)("Enable Features","it-l10n-ithemes-security-pro"),priority:5,callback:()=>t(),render:function(){const e=(0,T.useSelect)((e=>e(L.MODULES_STORE_NAME).getEditedModules()),[]).filter((e=>"active"===e.status.selected&&e.onboard));return e.length?(0,c.createElement)(React.Fragment,null,(0,c.createElement)("p",null,(0,u.__)("The following security features will be enabled:","it-l10n-ithemes-security-pro")),(0,c.createElement)("ul",null,e.map((e=>(0,c.createElement)("li",{key:e.id},e.title))))):(0,c.createElement)("p",null,(0,u.__)("No additional security features have been selected.","it-l10n-ithemes-security-pro"))}}),e({id:"savingSettings",label:(0,u.__)("Configure Settings","it-l10n-ithemes-security-pro"),priority:10,callback:()=>n(),render:function(){const e=(0,T.useSelect)((e=>e(L.MODULES_STORE_NAME).getEditedModules().filter((e=>"active"===e.status.selected&&e.settings?.onboard?.length>0)).flatMap((t=>{const n=e(L.MODULES_STORE_NAME).getSettingEdits(t.id);return t.settings.onboard.reduce(((e,r)=>{if(!n||!n[r])return e;const s=t.settings.schema?.uiSchema?.[r]?.["ui:title"]||t.settings.schema.properties[r].title;return e.push((0,u.sprintf)((0,u.__)("%1$s: %2$s","it-l10n-ithemes-security-pro"),t.title,s)),e}),[])}))),[]);return e.length?(0,c.createElement)(React.Fragment,null,(0,c.createElement)("p",null,(0,u.__)("The following settings will be configured:","it-l10n-ithemes-security-pro")),(0,c.createElement)("ul",null,e.map(((e,t)=>(0,c.createElement)("li",{key:t},e))))):(0,c.createElement)("p",null,(0,u.__)("No settings have been configured.","it-l10n-ithemes-security-pro"))}})}))}function mr(e){let{onDismiss:t}=e;const{next:n}=A();return(0,c.createElement)("div",{className:"itsec-onboard-welcome-page"},(0,c.createElement)(Pe,{style:"white",className:"itsec-onboard-welcome-page__logo"}),(0,c.createElement)(ve,{title:(0,u.__)("Welcome to iThemes Security. You are just a few clicks away from securing your site.","it-l10n-ithemes-security-pro"),subtitle:(0,u.__)("The next steps will guide you through the setup process so the most important security features are enabled for your site.","it-l10n-ithemes-security-pro"),breadcrumbs:!1}),(0,c.createElement)("div",{className:"itsec-onboard-welcome-page__actions-container"},(0,c.createElement)(Fe.w8,{className:"itsec-onboard-welcome-page__graphic"}),(0,c.createElement)("div",{className:"itsec-onboard-welcome-page__actions"},(0,c.createElement)(b.Button,{onClick:t,icon:"arrow-right-alt",text:(0,u.__)("Start","it-l10n-ithemes-security-pro"),iconPosition:"right",isPrimary:!0,className:"itsec-button-icon-right"}),(0,c.createElement)(F.rU,{to:n},(0,u.__)("Skip Setup","it-l10n-ithemes-security-pro")))))}function pr(){const e=x(),{url:t,path:n}=(0,h.$B)(),{pathname:r}=(0,h.TH)(),{recordVisitedLocation:s}=(0,T.useDispatch)(Ft);return(0,c.useEffect)((()=>{s(r)}),[r]),(0,c.createElement)(h.rs,null,e.map((e=>{let{id:t,render:r}=e;return(0,c.createElement)(h.AW,{path:`${n}/:page(${t})`,key:t},(0,c.createElement)(Er,{render:r}))})),(0,c.createElement)(h.AW,{path:t},e.length>0&&(0,c.createElement)(h.l_,{to:`${t}/${e[0].id}`}),(0,c.createElement)(q,null,(0,c.createElement)(de,{guided:!0,allowBack:!0})),(0,c.createElement)(W,null)))}function Er(e){let{render:t}=e;const[n,r]=(0,c.useState)(!0),s=(0,O.useMediaQuery)("(min-width: 960px)"),{isExact:i,params:{page:l}}=(0,h.$B)();return i&&"site-type"===l?s||!n?(0,c.createElement)(React.Fragment,null,s?(0,c.createElement)(fr,null):(0,c.createElement)(gr,{page:l}),(0,c.createElement)(hr,{render:t})):(0,c.createElement)(mr,{onDismiss:()=>r(!1)}):(0,c.createElement)(React.Fragment,null,(0,c.createElement)(gr,{page:l}),(0,c.createElement)(hr,{render:t}))}function gr(e){let{page:t}=e;return(0,c.createElement)(q,null,(0,c.createElement)(de,{guided:!0,allowBack:!0}),"site-type"===t&&(0,c.createElement)(yr,null))}function hr(e){let{render:t}=e;return(0,c.createElement)(W,null,(0,c.createElement)(D.ot,null),(0,c.createElement)(t,null))}function fr(){return(0,c.createElement)(q,{className:"itsec-onboard-welcome-sidebar",logo:"white"},(0,c.createElement)("p",{className:"itsec-onboard-welcome-sidebar__lead"},(0,u.__)("Welcome to iThemes Security. You are just a few clicks away from securing your site.","it-l10n-ithemes-security-pro")),(0,c.createElement)("p",{className:"itsec-onboard-welcome-sidebar__content"},(0,u.__)("The next steps will guide you through the setup process so the most important security features are enabled for your site.","it-l10n-ithemes-security-pro")),(0,c.createElement)(yr,{showGraphic:!0}))}function yr(e){let{showGraphic:t}=e;const{next:n}=A();return(0,c.createElement)("div",{className:"itsec-onboard-skip-setup"},t&&(0,c.createElement)(Fe.w8,{className:"itsec-onboard-welcome-sidebar__graphic"}),(0,c.createElement)("div",{className:"itsec-onboard-skip-setup__text"},(0,c.createElement)(F.rU,{to:n},(0,u.__)("Skip Setup","it-l10n-ithemes-security-pro")),(0,c.createElement)("p",{className:"itsec-onboard-skip-setup__description"},(0,u.__)("Proceed with default settings.","it-l10n-ithemes-security-pro"))))}function _r(){const e=x(),{url:t,path:n}=(0,h.$B)();return(0,c.createElement)(h.rs,null,e.map((e=>{let{id:t,render:r}=e;return(0,c.createElement)(h.AW,{path:`${n}/:page(${t})`,key:t},(0,c.createElement)(q,null,(0,c.createElement)(de,null),(0,c.createElement)(ge,null)),(0,c.createElement)(W,null,(0,c.createElement)(D.ot,null),(0,c.createElement)(r,null)))})),(0,c.createElement)(h.AW,{path:t},e.length>0&&(0,c.createElement)(h.l_,{to:`${t}/${e[0].id}`}),(0,c.createElement)(q,null,(0,c.createElement)(de,null),(0,c.createElement)(ge,null)),(0,c.createElement)(W,null)))}function br(){const e=x(),{url:t,path:n}=(0,h.$B)();return e.length>0&&!e.find((e=>"select-export"===e.id))?(0,c.createElement)(h.l_,{to:"/"}):(0,c.createElement)(h.rs,null,e.map((e=>{let{id:t,render:r}=e;return(0,c.createElement)(h.AW,{path:`${n}/:page(${t})`,key:t},(0,c.createElement)(q,null,(0,c.createElement)(de,{guided:!0,allowBack:!0,allowForward:"select-export"!==t})),(0,c.createElement)(W,null,(0,c.createElement)(D.ot,null),(0,c.createElement)(r,null)))})),(0,c.createElement)(h.AW,{path:t},e.length>0&&(0,c.createElement)(h.l_,{to:`${t}/${e[0].id}`}),(0,c.createElement)(q,null,(0,c.createElement)(de,{guided:!0,allowBack:!0})),(0,c.createElement)(W,null)))}function vr(){return(0,c.createElement)(React.Fragment,null,(0,c.createElement)(C,{id:"site-type",title:(0,u.__)("Site Type","it-l10n-ithemes-security-pro"),priority:0,roots:["onboard"]},(()=>(0,c.createElement)(_n,null))),(0,c.createElement)(C,{id:"modules",title:(0,u.__)("Features","it-l10n-ithemes-security-pro"),icon:"shield",priority:5,roots:["onboard","settings","import"]},(()=>(0,c.createElement)(bn,null))),(0,c.createElement)(C,{id:"configure",title:(0,u.__)("Configure","it-l10n-ithemes-security-pro"),icon:"admin-settings",priority:15,roots:["onboard","settings","import"],ignore:["/advanced/"]},(()=>(0,c.createElement)(Cn,null))),(0,c.createElement)(C,{id:"secure-site",title:(0,u.__)("Secure Site","it-l10n-ithemes-security-pro"),priority:100,roots:["onboard","import"]},(()=>(0,c.createElement)(ir,null))),(0,c.createElement)(C,{id:"tools",title:(0,u.__)("Tools","it-l10n-ithemes-security-pro"),icon:"admin-tools",priority:80,location:"advanced",roots:["settings"]},(()=>(0,c.createElement)($n,null))))}function Sr(){const{registerProvider:e}=(0,T.useDispatch)(V.G);(0,U.eH)(Sr,(()=>{e("modules",(0,u.__)("Features","it-l10n-ithemes-security-pro"),5,(e=>{let{registry:t,evaluate:n,results:r}=e;return t.select(L.MODULES_STORE_NAME).getEditedModules().reduce(((e,t)=>{const s=Nr(t);return s&&(n.stringMatch(t.title)||n.stringMatch(t.description)||n.keywordMatch(t.keywords))?(r.items.push({title:t.title,description:t.description,route:s}),e+1):e}),0)})),e("settings",(0,u.__)("Settings","it-l10n-ithemes-security-pro"),20,(e=>{let{registry:t,evaluate:n,results:r}=e;return t.select(L.MODULES_STORE_NAME).getEditedModules().reduce(((e,t)=>{if("active"!==t.status.selected||!t.settings?.interactive?.length)return e;const s=Nr(t);return s?e+t.settings.interactive.reduce(((e,i)=>{var l,a,o;const c=t.settings.schema.properties[i],u=t.settings.schema.uiSchema?.[i];if(!c)return e;const d=u?.ui?.title||u?.["ui:title"]||c.title,m=u?.ui?.description||u?.["ui:description"]||c.description;return n.stringMatch(d)||n.stringMatch(m)||n.keywordMatch(c.keywords)?(null!==(o=(l=r.groups)[a=t.id])&&void 0!==o||(l[a]={title:t.title,items:[]}),r.groups[t.id].items.push({title:d,description:m,route:`${s}#${i}`}),e++):e}),0):e}),0)})),e("tools",(0,u.__)("Tools","it-l10n-ithemes-security-pro"),100,(e=>{let{registry:t,evaluate:n,results:r}=e;return t.select(mn).getResolvedTools().reduce(((e,t)=>t.available&&(n.stringMatch(t.title)||n.stringMatch(t.description)||n.keywordMatch(t.keywords))?(r.items.push({title:t.title,description:t.description,route:`/settings/tools#${t.slug}`}),e+1):e),0)}))}))}function Nr(e){if("custom"===e.type||"tool"===e.type)return;if("password-requirements"===e.id)return"/settings/user-groups?module=password-requirements";const t=`/settings/modules/${e.type}#${e.id}`;return"inactive"===e.status.selected?t:e.settings?.interactive.length>0?"recommended"===e.type?`/settings/configure/${e.id}`:`/settings/configure/${e.type}/${e.id}`:"always-active"!==e.status.default?t:void 0}function Or(e){let{history:t,serverType:n,installType:r,onboardComplete:s}=e;Sr();const i=s?"/settings":"/onboard";return(0,c.createElement)(_.a,{theme:S.uH},(0,c.createElement)("div",{className:"itsec-settings"},(0,c.createElement)(te.Provider,{value:{serverType:n,installType:r,onboardComplete:s}},(0,c.createElement)(h.F0,{history:t},(0,c.createElement)(f.Fz,{ReactRouterRoute:h.AW},(0,c.createElement)(b.SlotFillProvider,null,(0,c.createElement)(y.ErrorBoundary,{FallbackComponent:Tr},(0,c.createElement)(I,null,(0,c.createElement)(vr,null),(0,c.createElement)(v.PluginArea,null),(0,c.createElement)(b.Popover.Slot,null),(0,c.createElement)(h.rs,null,(0,c.createElement)(h.AW,{path:"/:root(settings)",component:_r}),(0,c.createElement)(h.AW,{path:"/:root(onboard)",component:pr}),(0,c.createElement)(h.AW,{path:"/:root(import)",component:br}),(0,c.createElement)(h.AW,{path:"/"},(0,c.createElement)(h.l_,{to:i}),(0,c.createElement)(q,null),(0,c.createElement)(W,null)))))))))))}function Tr(e){return(0,c.createElement)(b.Flex,null,(0,c.createElement)(b.FlexBlock,null,(0,c.createElement)(De,e)))}n.p=window.itsecWebpackPublicPath,(0,u.setLocaleData)({"":{}},"it-l10n-ithemes-security-pro");const Lr=function(e,t){const n=(0,p.lX)(),r=n=>{const r="string"==typeof n?(0,p.cP)(n):n,s=(0,E.parse)(r.search?.substring(1))||{};return{...r,pathname:e.pathname,search:"?"+(0,E.stringify)({...s,path:r.pathname,...t})}};return{get length(){return n.length},get action(){return n.action},get location(){const e=(0,E.parse)(n.location.search.substring(1)),r=e.path||"/";return{...n.location,pathname:r,search:"?"+(0,E.stringify)((0,g.omit)(e,["path",Object.keys(t)]))}},createHref:e=>n.createHref(r(e)),push:(e,t)=>{n.push(r(e),t)},replace:(e,t)=>{n.replace(r(e),t)},go:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.go.apply(n,t)},goBack:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.goBack.apply(n,t)},goForward:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.goForward.apply(n,t)},block:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.block.apply(n,t)},listen(e){return n.listen((()=>{e(this.location,this.action)}))}}}(document.location,{page:"itsec"});m()((()=>{const e=document.getElementById("itsec-settings-root"),t=e.dataset.serverType,n=e.dataset.installType,r="1"===e.dataset.onboard;return(0,c.render)((0,c.createElement)(Or,{history:Lr,serverType:t,installType:n,onboardComplete:r}),e)}))},91991:(e,t,n)=>{"use strict";n.d(t,{r5:()=>h,OR:()=>f,Zk:()=>_,_:()=>b,qq:()=>v,$X:()=>S,eH:()=>g,gU:()=>o,nP:()=>c,Sj:()=>p,lo:()=>m,vl:()=>l,of:()=>d});var r=n(87462),s=n(6293),i=n(9576);function l(e){return(0,i.createHigherOrderComponent)((t=>class extends s.Component{render(){return(0,s.createElement)(t,(0,r.Z)({},this.props,e))}}),"withProps")}var a=n(92819);function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,i.createHigherOrderComponent)((r=>class extends s.Component{constructor(){var r;super(...arguments),r=this,this.debouncedPropInvoke=(0,a.debounce)((function(){return r.props[e](...arguments)}),"function"==typeof t?t(this.props):t,n),this.handler=function(e){e&&"function"==typeof e.persist&&e.persist();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return r.debouncedPropInvoke(e,...n)}}componentWillUnmount(){this.debouncedPropInvoke.cancel()}render(){const t={...this.props,[e]:this.handler};return(0,s.createElement)(r,t)}}),"withDebounceHandler")}function c(e,t){let n;return n=(0,a.isFunction)(t)?[{delay:e,cb:t}]:e,(0,i.createHigherOrderComponent)((e=>class extends s.Component{constructor(){super(...arguments),this.intervalIds=[]}componentDidMount(){for(const e of n)(t=>{this.intervalIds.push(setInterval((()=>t(this.props)),e.delay))})(e.cb)}componentWillUnmount(){this.intervalIds.forEach(clearInterval)}render(){return(0,s.createElement)(e,this.props)}}),"withInterval")}var u=n(4942);const d=(0,i.createHigherOrderComponent)((e=>{var t;return t=class extends s.Component{constructor(){super(...arguments),(0,u.Z)(this,"state",{width:1280}),(0,u.Z)(this,"mounted",!1),(0,u.Z)(this,"ref",null),(0,u.Z)(this,"onWindowResize",(()=>{if(!this.mounted)return;const e=(0,s.findDOMNode)(this);if(e instanceof window.HTMLElement){const t=e.offsetWidth;this.setState({width:t})}}))}componentDidMount(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").addEventListener("click",this.onWindowResize),this.onWindowResize()}componentWillUnmount(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize),document.getElementById("collapse-button").removeEventListener("click",this.onWindowResize)}render(){const{measureBeforeMount:t,...n}=this.props;return t&&!this.mounted?(0,s.createElement)("div",{className:this.props.className,style:this.props.style}):(0,s.createElement)(e,(0,r.Z)({},n,{width:this.state.width+20}))}},(0,u.Z)(t,"defaultProps",{measureBeforeMount:!1}),t}),"withWidth"),m=(0,i.createHigherOrderComponent)((e=>class extends s.Component{constructor(){super(...arguments),(0,u.Z)(this,"state",{pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}}),(0,u.Z)(this,"mounted",!1),this.listener=this.listener.bind(this),this.onBlur=this.onBlur.bind(this)}componentDidMount(){this.mounted=!0,window.addEventListener("keydown",this.listener),window.addEventListener("keyup",this.listener),window.addEventListener("click",this.listener),window.addEventListener("blur",this.onBlur)}componentWillUnmount(){this.mounted=!1,window.removeEventListener("keydown",this.listener),window.removeEventListener("keyup",this.listener),window.removeEventListener("click",this.listener),window.removeEventListener("blur",this.onBlur)}listener(e){this.mounted&&this.setState({pressed:{shift:e.shiftKey,ctrl:e.ctrlKey,meta:e.metaKey,alt:e.altKey}})}onBlur(){this.setState({pressed:{shift:!1,ctrl:!1,meta:!1,alt:!1}})}render(){return(0,s.createElement)(e,(0,r.Z)({pressedModifierKeys:this.state.pressed},this.props))}}),"withPressedModifierKeys"),p=(0,i.createHigherOrderComponent)((e=>function(t){let{navigate:n,...i}=t;return(0,s.createElement)(e,(0,r.Z)({},i,{onClick:e=>{try{i.onClick&&i.onClick(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||i.target&&"_self"!==i.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}}))}),"withNavigate"),E=new WeakMap;function g(e,t){(0,s.useLayoutEffect)((()=>{E.has(e)||(t(),E.set(e,!0))}),[])}function h(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const[n,r]=(0,s.useState)("idle"),[i,l]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),c=(0,s.useCallback)((function(){return r("pending"),o(null),e(...arguments).then((e=>{l(e),r("success")})).catch((e=>{o(e),l(null),r("error")}))}),[e]);return(0,s.useEffect)((()=>{t&&c()}),[c,t]),{execute:c,status:n,value:i,error:a}}function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;const r=(0,s.useRef)();(0,s.useEffect)((()=>{r.current=t}),[t]),(0,s.useEffect)((()=>{if(!n||!n.addEventListener)return;const t=e=>r.current(e);return n.addEventListener(e,t),()=>n.removeEventListener(e,t)}),[e,n])}const y=["button","submit"];function _(e){const t=(0,s.useRef)(e);(0,s.useEffect)((()=>{t.current=e}),[e]);const n=(0,s.useRef)(!1),r=(0,s.useRef)(),i=(0,s.useCallback)((()=>{clearTimeout(r.current)}),[]);(0,s.useEffect)((()=>()=>i()),[]),(0,s.useEffect)((()=>{e||i()}),[e,i]);const l=(0,s.useCallback)((e=>{const{type:t,target:r}=e;(0,a.includes)(["mouseup","touchend"],t)?n.current=!1:function(e){if(!(e instanceof window.HTMLElement))return!1;switch(e.nodeName){case"A":case"BUTTON":return!0;case"INPUT":return(0,a.includes)(y,e.type)}return!1}(r)&&(n.current=!0)}),[]),o=(0,s.useCallback)((e=>{e.persist(),n.current||(r.current=setTimeout((()=>{document.hasFocus()?"function"==typeof t.current&&t.current(e):e.preventDefault()}),0))}),[]);return{onFocus:i,onMouseDown:l,onMouseUp:l,onTouchStart:l,onTouchEnd:l,onBlur:o}}function b(e,t){const[n,r]=(0,s.useState)((()=>{try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return console.error(e),t}}));return[n,t=>{try{const s=t instanceof Function?t(n):t;r(s),window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error(e)}}]}function v(e){const t=(0,s.useRef)(null),n=(0,s.useRef)(!1),r=(0,s.useRef)(e),i=(0,s.useRef)(e);return i.current=e,(0,s.useLayoutEffect)((()=>{e.forEach(((e,s)=>{const i=r.current[s];"function"==typeof e&&e!==i&&!1===n.current&&(i(null),e(t.current))})),r.current=e}),e),(0,s.useLayoutEffect)((()=>{n.current=!1})),(0,s.useCallback)((e=>{t.current=e,n.current=!0,(e?i.current:r.current).forEach((t=>{"function"==typeof t?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}))}),[])}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,n]=(0,s.useState)(e);return[t,(0,s.useCallback)((e=>n((t=>[...t,e])))),(0,s.useCallback)((e=>n((t=>t.filter((t=>t!==e)))))),n]}},33590:(e,t,n)=>{"use strict";n.d(t,{bB:()=>q,ZP:()=>K});var r={};n.r(r),n.d(r,{BaseInput:()=>u,CheckboxWidget:()=>p,CheckboxesWidget:()=>E,IncludeExcludeWidget:()=>R,RadioWidget:()=>L,SelectWidget:()=>b,TextareaWidget:()=>v,ToggleWidget:()=>m});var s={};n.r(s),n.d(s,{EntitySelectField:()=>A,FileTreeField:()=>U,TextareaListField:()=>D,TitleField:()=>k});var i=n(92819),l=n(87462),a=n(6293),o=n(64893),c=n(19144);const u=function(e){const{id:t,label:n,value:r,readonly:s,disabled:u,onBlur:d,onFocus:m,options:p,onChange:E,schema:g,uiSchema:h={},...f}=e;p.inputType?f.type=p.inputType:f.type||("number"===g.type?(f.type="number",f.step="any"):"integer"===g.type?(f.type="number",f.step="1"):f.type="text"),p.autocomplete&&(f.autoComplete=p.autocomplete),g.multipleOf&&(f.step=g.multipleOf),void 0!==g.minimum&&(f.min=g.minimum),void 0!==g.maximum&&(f.max=g.maximum);const y=h["ui:description"]||g.description;return(0,a.createElement)(o.TextControl,(0,l.Z)({label:n,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:y}),readOnly:s,disabled:u,value:r||""},(0,i.omit)(f,["autofocus","formContext","registry","rawErrors"]),{onChange:e=>E(""===e?p.emptyValue:e),onBlur:d&&(e=>d(f.id,e.target.value)),onFocus:m&&(e=>m(f.id,e.target.value))}))};var d=n(54639);function m(e){let{schema:t,uiSchema:n={},id:r,value:s,disabled:i,readonly:l,label:u,onBlur:m,onFocus:p,onChange:E}=e;const g=d.P6.schemaRequiresTrueValue(t),h=n["ui:description"]||t.description;return(0,a.createElement)(o.ToggleControl,{checked:s||!1,onChange:E,required:g,disabled:i,readOnly:l,label:u,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:h}),onBlur:m&&(e=>m(r,e.target.checked)),onFocus:p&&(e=>p(r,e.target.checked))})}function p(e){let{schema:t,uiSchema:n={},id:r,value:s,disabled:i,readonly:l,label:u,onBlur:m,onFocus:p,onChange:E}=e;const g=d.P6.schemaRequiresTrueValue(t),h=n["ui:description"]||t.description;return(0,a.createElement)(o.CheckboxControl,{checked:s||!1,onChange:E,required:g,disabled:i,readOnly:l,label:u,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:h}),onBlur:m&&(e=>m(r,e.target.checked)),onFocus:p&&(e=>p(r,e.target.checked))})}function E(e){const{disabled:t,options:n,value:r,readonly:s,onChange:i,label:l,schema:o,uiSchema:u={}}=e,{enumOptions:d,enumDisabled:m=[],enumDescriptions:p=[]}=n,E=u["ui:description"]||o.description,g=d.map(((e,t)=>({...e,disabled:m.includes(e.value),help:p[t]&&(0,a.createElement)(c.Lu,{noWrap:!0,content:p[t]})})));return(0,a.createElement)(c.w2,{value:r||[],onChange:i,options:g,label:l||u["ui:title"]||o.title,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:E}),readOnly:s,disabled:t})}const{asNumber:g,guessType:h}=d.P6,f=new Set(["number","integer"]);function y(e,t){const{type:n,items:r}=e;if(""!==t){if("array"===n&&r&&f.has(r.type))return t.map(g);if("boolean"===n)return"true"===t;if("number"===n)return g(t);if(e.enum){if(e.enum.every((e=>"number"===h(e))))return g(t);if(e.enum.every((e=>"boolean"===h(e))))return"true"===t}return t}}function _(e,t){return t?[].slice.call(e.target.options).filter((e=>e.selected)).map((e=>e.value)):e.target.value}const b=function(e){const{schema:t,uiSchema:n={},id:r,options:s,value:i,label:l,required:u,disabled:d,readonly:m,multiple:p,onChange:E,onBlur:g,onFocus:h,placeholder:f}=e,{enumOptions:b,enumDisabled:v}=s,S=p?[]:"",N=[];p||void 0!==t.default||N.push({value:"",label:f});for(const e of b)N.push({...e,disabled:v&&v.includes(e.value)});const O=n["ui:description"]||t.description;return(0,a.createElement)(o.SelectControl,{multiple:p,options:N,value:void 0===i?S:i,label:l,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:O}),required:u,disabled:d,readOnly:m,onChange:e=>E(y(t,e)),onBlur:g&&(e=>g(r,y(t,_(e,p)))),onFocus:h&&(e=>h(r,y(t,_(e,p))))})};function v(e){let{schema:t,uiSchema:n={},id:r,value:s,disabled:u,readonly:d,label:m,onBlur:p,onFocus:E,onChange:g,...h}=e;const f=n["ui:description"]||t.description;return(0,a.createElement)(o.TextareaControl,(0,l.Z)({value:void 0===s?"":s,onChange:g,disabled:u,readOnly:d,label:m,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:f}),onBlur:p&&(e=>p(r,e.target.value)),onFocus:E&&(e=>E(r,e.target.value))},(0,i.without)(h,["autofocus","formContext","registry","rawErrors"])))}const{asNumber:S,guessType:N}=d.P6,O=new Set(["number","integer"]);function T(e,t){const{type:n,items:r}=e;if(""!==t){if("array"===n&&r&&O.has(r.type))return t.map(S);if("boolean"===n)return"true"===t;if("number"===n)return S(t);if(e.enum){if(e.enum.every((e=>"number"===N(e))))return S(t);if(e.enum.every((e=>"boolean"===N(e))))return"true"===t}return t}}function L(e){let{schema:t,uiSchema:n={},id:r,options:s,value:i,label:l,required:u,disabled:d,readonly:m,onChange:p,onBlur:E,onFocus:g}=e;const{enumOptions:h}=s,f=n["ui:description"]||t.description;return(0,a.createElement)(o.RadioControl,{selected:i,options:h,label:l,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:f}),required:u,disabled:d,readOnly:m,onChange:e=>p(T(t,e)),onBlur:E&&(e=>E(r,T(t,e.target.value))),onFocus:g&&(e=>g(r,T(t,e.target.value)))})}var w=n(95122),I=n(82839),C=n(81019);function R(e){let{id:t,disabled:n,options:r,value:s,onChange:l,schema:c,autofocus:u,readonly:d}=e;const{enumOptions:m,enumDisabled:p=[],excludeList:{title:E=(0,w.__)("Excluded","it-l10n-ithemes-security-pro"),description:g=(0,w.__)("The list of items to exclude from the selection.","it-l10n-ithemes-security-pro"),button:h=(0,w.__)("Include","it-l10n-ithemes-security-pro")}={},includeList:{title:f=(0,w.__)("Included","it-l10n-ithemes-security-pro"),description:y=(0,w.__)("The list of items to include in the selection.","it-l10n-ithemes-security-pro"),button:_=(0,w.__)("Exclude","it-l10n-ithemes-security-pro")}={},title:b=c.title,description:v=c.description}=r;(0,a.useEffect)((()=>{const e=m.map((e=>e.value)),t=s.filter((t=>e.includes(t)));t.length!==s.length&&l(t)}),[s,m,l]);const[S,N]=(0,i.partition)(m,(e=>!s.includes(e.value)));return(0,a.createElement)("div",{className:"itsec-rjsf-include-exclude-widget"},b&&(0,a.createElement)(o.BaseControl.VisualLabel,null,b),v&&(0,a.createElement)("p",null,v),(0,a.createElement)("div",{className:"itsec-rjsf-include-exclude-widget__sides",id:t},(0,a.createElement)(x,{id:t+"__exclude",options:S,label:E,description:g,button:h,disabled:n||d,disabledOptions:p,autofocus:u,onToggle:e=>{(0,I.speak)((0,w.sprintf)((0,w.__)("Moved %1$s to %2$s.","it-l10n-ithemes-security-pro"),(0,i.find)(S,{value:e}).label,f)),l([...s,e])}}),(0,a.createElement)(x,{id:t+"__include",options:N,label:f,description:y,button:_,disabled:n||d,disabledOptions:p,onToggle:e=>{(0,I.speak)((0,w.sprintf)((0,w.__)("Moved %1$s to %2$s.","it-l10n-ithemes-security-pro"),(0,i.find)(N,{value:e}).label,E)),l(s.filter((t=>t!==e)))}})))}function x(e){let{id:t,label:n,description:r,options:s,button:l,onToggle:u,disabled:d,disabledOptions:m=[],autofocus:p}=e;const E=t+"__option__",[g,h]=(0,a.useState)("");return g&&!(0,i.find)(s,{value:g})&&h(""),(0,a.createElement)("div",{className:"itsec-rjsf-include-exclude-widget__side"},(0,a.createElement)(o.BaseControl,{id:t,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:r}),className:"itsec-rjsf-include-exclude-widget__listbox"},(0,a.createElement)("span",{className:"components-base-control__label",id:t+"__label"},n),(0,a.createElement)(c.T2,{role:"listbox",id:t,active:g&&E+g,"aria-labelledby":t+"__label","aria-describedby":r&&t+"__help",onNavigate:e=>h(e.substr(E.length)),onKeyDown:e=>{let{keyCode:t}=e;if(!g||t!==C.DELETE&&t!==C.BACKSPACE)return;const n=(0,i.findIndex)(s,{value:g}),r=n+1<s.length?n+1:n-1;u(g),h(s[r]?.value||"")},autoFocus:p},s.map((e=>(0,a.createElement)("div",{id:E+e.value,key:e.value,role:d||m.includes(e.value)?"presentation":"option","aria-selected":e.value===g||void 0,onClick:d||m.includes(e.value)?void 0:()=>h(e.value)},e.label))))),(0,a.createElement)(o.Button,{isSecondary:!0,disabled:!g,className:"itsec-rjsf-include-exclude-widget__move",onClick:()=>u(g),"aria-keyshortcuts":"Delete Backspace"},l))}function k(e){const{id:t,title:n,required:r}=e;return(0,a.createElement)("span",{className:"itsec-rjsf-title-field",id:t},n,r&&(0,a.createElement)("span",{className:"required"},"*"))}const{getUiOptions:M}=d.P6;function A(e){let{uiSchema:t,schema:n,idSchema:r,name:s,formData:i,disabled:l,readonly:o,onChange:u}=e;const d=M(t);return(0,a.createElement)(c.fv,{id:r.$id,value:i,disabled:l,readonly:o,onChange:u,isMultiple:"array"===n.type,label:t["ui:title"]||n.title||s,description:t["ui:description"]||n.description,path:d.path,query:d.query,labelAttr:d.labelAttr,idAttr:d.idAttr,searchArg:d.searchArg})}const{getUiOptions:F}=d.P6;function D(e){let{uiSchema:t,schema:n,name:r,formData:s,disabled:i,readonly:l,onChange:o}=e;const u=t["ui:title"]||n.title||r,d=t["ui:description"]||n.description,m=F(t),{rows:p,placeholder:E}=m;return(0,a.createElement)(c.yA,{label:u,help:(0,a.createElement)(c.Lu,{noWrap:!0,content:d}),disabled:i,readonly:l,rows:p,value:s,onChange:o,placeholder:E})}var P=n(87514),$=n.n(P),B=n(73470);function U(e){let{idSchema:t,formData:n,onChange:r,uiSchema:s,schema:l,name:u,disabled:d,readonly:m,autofocus:p}=e;const E=t.$id,g=s["ui:title"]||l.title||u,h=s["ui:description"]||l.description,[f,y]=(0,a.useState)([]),[_,b]=(0,a.useState)("");(0,a.useEffect)((()=>{$()({path:(0,B.addQueryArgs)("/ithemes-security/rpc/file-change/file-tree",{directory:"/"})}).then(y)}),[]);const v=e=>{r(n.includes(e)?n.filter((t=>t!==e)):[...n,e])};return(0,a.createElement)("div",{className:"itsec-rjsf-file-tree"},h&&(0,a.createElement)(c.Lu,{content:h,tagName:"p"}),(0,a.createElement)("div",{className:"itsec-rjsf-file-tree__controls"},(0,a.createElement)("div",null,(0,a.createElement)(c.mp,{tree:f,id:E,label:(0,w.__)("File Selector","it-l10n-ithemes-security-pro"),active:_,setActive:b,onActivate:v,onLoad:async e=>{const t=await $()({path:(0,B.addQueryArgs)("/ithemes-security/rpc/file-change/file-tree",{directory:e})}),n=(0,i.cloneDeep)(f);(0,c.in)(n,(n=>{if(n.id===e)return n.children=t,c.in.halt})),y(n)}}),(0,a.createElement)(o.Button,{isSecondary:!0,disabled:!_,className:"itsec-rjsf-file-tree__select",onClick:()=>v(_),"aria-keyshortcuts":"Enter Space"},(0,w.__)("Select","it-l10n-ithemes-security-pro"))),(0,a.createElement)(c.yA,{value:n,onChange:r,className:"itsec-rjsf-file-tree__list",label:g,disabled:d,readonly:m,autoFocus:p})))}function q(e){let{name:t,...n}=e;return(0,a.createElement)(o.Fill,(0,l.Z)({name:`RjsfField${t}`},n))}function W(e){let{name:t,...n}=e;return(0,a.createElement)(o.Slot,(0,l.Z)({name:`RjsfField${t}`},n))}const{ADDITIONAL_PROPERTY_FLAG:H,getUiOptions:Z}=d.P6;function j(e){const{id:t,classNames:n,disabled:r,label:s,onKeyChange:i,onDropPropertyClick:l,readonly:c,required:u,schema:d,uiSchema:m}=e,p=`${s} Key`,E=d.hasOwnProperty(H),{removable:g}=Z(m);return E&&!1!==g?(0,a.createElement)("div",{className:n},(0,a.createElement)("div",{className:"row"},(0,a.createElement)("div",{className:"col-xs-5 form-additional"},(0,a.createElement)(o.TextControl,{label:p,required:u,id:`${t}-key`,onBlur:e=>i(e.target.value)})),(0,a.createElement)("div",{className:"form-additional form-group col-xs-5"},e.children),(0,a.createElement)("div",{className:"col-xs-2"},(0,a.createElement)(o.Button,{icon:"no-alt",isDestructive:!0,disabled:r||c,onClick:l(s)})))):(0,a.createElement)("div",{className:n},e.children)}const{canExpand:V}=d.P6;function z(e){let{className:t,onClick:n,disabled:r}=e;return(0,a.createElement)("div",{className:"row"},(0,a.createElement)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${t}`},(0,a.createElement)(o.Button,{icon:"plus-alt2",className:"btn-add col-xs-12","aria-label":(0,w.__)("Add","it-l10n-ithemes-security-pro"),tabIndex:"0",onClick:n,disabled:r})))}const G={FieldTemplate:function(e){const{children:t,errors:n,hidden:r,schema:s,uiSchema:i,formContext:l,onChange:c}=e;if(r)return null;const{resettable:u}=Z(i);return(0,a.createElement)(j,e,t,(0,a.createElement)(W,{name:e.id,fillProps:e}),u&&(0,a.createElement)(o.Button,{className:"itsec-rjsf-reset-field",isSecondary:!0,onClick:()=>c(s.default)},(0,w.__)("Restore Default","it-l10n-ithemes-security-pro")),!0!==l?.disableInlineErrors&&n)},ObjectFieldTemplate:function(e){const{TitleField:t,DescriptionField:n,schema:r,uiSchema:s,properties:i}=e;if(!i.length)return null;const l=(s["ui:sections"]||[]).reduce(((e,t)=>({...e,[t.fields.find((e=>!!r.properties[e]))]:t})),{});return(0,a.createElement)("div",{className:"itsec-rjsf-object-fieldset",id:e.idSchema.$id},(s["ui:title"]||e.title)&&(0,a.createElement)(t,{id:`${e.idSchema.$id}__title`,title:e.title||s["ui:title"],required:e.required,formContext:e.formContext}),e.description&&(0,a.createElement)(n,{id:`${e.idSchema.$id}__description`,description:(0,a.createElement)(c.Lu,{noWrap:!0,content:e.description}),formContext:e.formContext}),i.map((e=>{let{name:t,content:n}=e;return l[t]?(0,a.createElement)(a.Fragment,{key:t},(0,a.createElement)("h3",{className:"itsec-rjsf-section-title"},l[t].title),l[t].description&&(0,a.createElement)("p",{className:"itsec-rjsf-section-description"},(0,a.createElement)(c.Lu,{noWrap:!0,content:l[t].description})),n):n})),V(r,s,e.formData)&&(0,a.createElement)(z,{className:"object-property-expand",onClick:e.onAddClick(r),disabled:e.disabled||e.readonly}))},ErrorList:function(e){let{errors:t}=e;return(0,a.createElement)(c.KM,{errors:t.map((function(){let{stack:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e})).filter((e=>!!e))})},widgets:r,fields:s},K=G},50460:(e,t,n)=>{"use strict";n.d(t,{G:()=>$,o:()=>C});var r={};n.r(r),n.d(r,{REGISTER_PROVIDER:()=>F,registerProvider:()=>A});var s={};n.r(s),n.d(s,{getProviders:()=>D});var i=n(87462),l=n(6293),a=n(73727),o=n(16550),c=n(90071),u=n(92819),d=n(64893),m=n(95122),p=n(48015),E=n(9576),g=n(81019),h=n(82839),f=n(78380),y=n(91991),_=n(19144),b=n(86033),v=n(13092);function S(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var N=new WeakMap,O=new WeakMap,T=new WeakMap,L=new WeakMap,w=new WeakMap;class I{constructor(e,t){S(this,N,{writable:!0,value:void 0}),S(this,O,{writable:!0,value:void 0}),S(this,T,{writable:!0,value:void 0}),S(this,L,{writable:!0,value:void 0}),S(this,w,{writable:!0,value:void 0}),(0,v.Z)(this,N,e),(0,v.Z)(this,O,t),(0,v.Z)(this,T,t.select($).getProviders()),this._prepare()}_prepare(){(0,v.Z)(this,w,(0,b.Z)(this,N).split(/\s+/g).map((e=>e.trim().toLowerCase())).filter((e=>!!e)));const e=(0,b.Z)(this,N).endsWith(" ");(0,v.Z)(this,L,new RegExp((0,b.Z)(this,w).map(((t,n)=>n+1!==(0,b.Z)(this,w).length||e?`(?=.*\\b${(0,u.escapeRegExp)(t)}\\b)`:`(?=.*\\b${(0,u.escapeRegExp)(t)})`)).join("")+".+","gi"))}_stringMatch(e){return e&&(0,b.Z)(this,L).test(e)}_keywordMatch(e){return!(!e||!e.length)&&e.some((e=>(0,b.Z)(this,w).some(((t,n)=>e.includes(" ")?this._stringMatch(e):n===(0,b.Z)(this,w).length-1?e.startsWith(t):t===e))))}getResults(){if((0,b.Z)(this,N).length<3)return[{},0];let e=0;const t=[],n={stringMatch:e=>this._stringMatch(e),keywordMatch:e=>this._keywordMatch(e)};for(const r of(0,b.Z)(this,T)){const s={title:r.title,items:[],groups:{}};e+=r.callback({evaluate:n,results:s,registry:(0,b.Z)(this,O)}),!s.items.length&&(0,u.isEmpty)(s.groups)||t.push(s)}return[t,e]}}const C=(0,l.forwardRef)((function(e,t){let{onPick:n=u.noop,showResults:r}=e;const[s,a]=(0,l.useState)(""),[o,c]=(0,l.useState)(!1),d=(0,l.useRef)(),_=(0,l.useRef)(),[b,v]=(0,l.useState)([]),S=(0,p.useRegistry)(),N=(0,l.useCallback)((e=>{const t=new I(e,S).getResults();v(t[0]),(0,h.speak)((0,m.sprintf)((0,m._n)("%d result found.","%d results found.",t[1],"it-l10n-ithemes-security-pro"),t[1]))}),[S]),O=(0,E.useDebounce)(N,50),T=(0,l.useCallback)((e=>{d.current&&(e.preventDefault(),d.current.focus())}),[d]);return(0,E.useKeyboardShortcut)("/",T),(0,l.createElement)("div",(0,i.Z)({className:"itsec-search"},(0,y.Zk)((()=>c(!1)))),(0,l.createElement)("div",null,(0,l.createElement)(f.lD,{value:s,onChange:e=>{a(e),O(e)},onFocus:()=>c(!0),onKeyDown:e=>{e.keyCode===g.DOWN&&(e.preventDefault(),_.current.focus())},ref:(0,y.qq)([t,d]),placeholder:(0,m.__)("Search for feature, settings, and more","it-l10n-ithemes-security-pro"),omitSeparators:!0}),(o||r)&&s.length>=3&&(0,l.createElement)(R,{results:b,exitSearch:e=>{n(e),c(!1)},ref:_,onPick:n})))})),R=(0,l.forwardRef)((function(e,t){let{results:n,exitSearch:r,onPick:s}=e;const a=(0,l.useRef)();(0,l.useImperativeHandle)(t,(()=>({focus(){a.current.focus()}})));const p=(0,E.useInstanceId)(R,"itsec-search"),h=p+"__result__",f=function(){const e=(0,o.k6)();return function(t){return e[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push"]((0,c.ob)(t))}}(),[y,b]=(0,l.useState)("");return(0,u.isEmpty)(n)?null:(0,l.createElement)(React.Fragment,null,(0,l.createElement)(d.VisuallyHidden,{id:p+"__label"},(0,m.__)("Search Results","it-l10n-ithemes-security-pro")),(0,l.createElement)(_.T2,{className:"itsec-search__results",id:p,active:y&&h+y,onNavigate:e=>b(e.substr(h.length)),onKeyDown:e=>{let{keyCode:t}=e;!y||t!==g.ENTER&&t!==g.SPACE||(s(y),f(y),r())},onFocus:()=>{if(!y&&!(0,u.isEmpty)(n)){const[,e]=Object.entries(n)[0];if(e.items?.length)b(e.items[0].route);else if(!(0,u.isEmpty)(e.groups)){const[,t]=Object.entries(e.groups)[0];b(t.items[0].route)}}},role:"listbox",descendantRoles:"option",ref:a,"aria-labelledby":p+"__label"},(0,u.map)(n,((e,t)=>(0,l.createElement)(x,(0,i.Z)({key:t},e,{active:y,idPrefix:h,exitSearch:r}))))))}));function x(e){let{title:t,items:n,groups:r,...s}=e;const a=(0,E.useInstanceId)(R,"itsec-search__kind");return(0,l.createElement)("ul",{className:"itsec-search__kind",role:"group","aria-labelledby":a},(0,l.createElement)("li",{role:"presentation",id:a},t),(n||[]).map((e=>(0,l.createElement)(M,(0,i.Z)({key:e.route},e,s)))),(0,u.map)(r,((e,t)=>(0,l.createElement)(k,(0,i.Z)({key:t},e,s)))))}function k(e){let{title:t,items:n,...r}=e;const s=(0,E.useInstanceId)(R,"itsec-search__group");return(0,l.createElement)("ul",{className:"itsec-search__group",role:"group","aria-labelledby":s},(0,l.createElement)("li",{role:"presentation",id:s},(0,l.createElement)("span",null,t)),(n||[]).map((e=>(0,l.createElement)(M,(0,i.Z)({key:e.route},e,r)))))}function M(e){let{title:t,description:n,route:r,active:s,idPrefix:i,exitSearch:o}=e;return(0,l.createElement)("li",{className:"itsec-search__result",role:"option","aria-selected":s===r||void 0,id:i+r,"aria-label":t},(0,l.createElement)(a.rU,{to:r,tabIndex:-1,onClick:()=>o(r)},(0,l.createElement)("span",null,t),(0,l.createElement)(_.Lu,{content:n,noHtml:!0,tagName:"p"})))}function A(e,t,n,r){return{type:F,slug:e,title:t,priority:n,callback:r}}const F="REGISTER_PROVIDER",D=(0,n(28306).Z)((e=>(0,u.sortBy)(e.providers,"priority")),(e=>e.providers)),P={providers:{}},$="ithemes-security/search";(0,p.registerStore)($,{actions:r,selectors:s,reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;return t.type===F?{...e,providers:{...e.providers,[t.slug]:(0,u.omit)(t,["type"])}}:e}})},31600:e=>{e.exports=function(){return this.itsec.packages.data}()},82839:e=>{e.exports=function(){return this.wp.a11y}()},87514:e=>{e.exports=function(){return this.wp.apiFetch}()},64893:e=>{e.exports=function(){return this.wp.components}()},9576:e=>{e.exports=function(){return this.wp.compose}()},48015:e=>{e.exports=function(){return this.wp.data}()},25993:e=>{e.exports=function(){return this.wp.domReady}()},6293:e=>{e.exports=function(){return this.wp.element}()},54761:e=>{e.exports=function(){return this.wp.hooks}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},81834:e=>{e.exports=function(){return this.wp.isShallowEqual}()},81019:e=>{e.exports=function(){return this.wp.keycodes}()},3571:e=>{e.exports=function(){return this.wp.plugins}()},14776:e=>{e.exports=function(){return this.wp.primitives}()},73470:e=>{e.exports=function(){return this.wp.url}()},99196:e=>{"use strict";e.exports=window.React},91850:e=>{"use strict";e.exports=window.ReactDOM},92819:e=>{"use strict";e.exports=window.lodash}},e=>{e.O(0,[7271,4899,3075,8380,5096,4639,7967,6682,9144,1783],(()=>(46385,e(e.s=46385))));var t=e.O();((window.itsec=window.itsec||{}).pages=window.itsec.pages||{}).settings=t}]);
